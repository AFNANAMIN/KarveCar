<ResourceDictionary  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:KarveControls="clr-namespace:KarveControls;assembly=KarveControls"
                    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                    xmlns:common="clr-namespace:MasterModule.Common;assembly=MasterModule"
                    xmlns:converter="clr-namespace:KarveCommon.Converter;assembly=KarveCommon"
                    xmlns:mvvm1="http://prismlibrary.com/"
                    xmlns:template="clr-namespace:KarveControls.Template;assembly=KarveControls"
                    xmlns:Syncfusion="http://schemas.syncfusion.com/wpf"
                    xmlns:system="clr-namespace:System;assembly=mscorlib"
                    xmlns:properties="clr-namespace:KarveLocale.Properties;assembly=KarveLocale"
                    xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:gridbehavior="clr-namespace:KarveControls.Behaviour.Grid;assembly=KarveControls"
                     xmlns:behaviour="clr-namespace:KarveControls.Behaviour;assembly=KarveControls">
    
    <converter:ByteToBooleanConverter x:Key="ByteToBooleanConverter"></converter:ByteToBooleanConverter>
    <converter:NullBoleanToBooleanConverter x:Key="NullableBooleanConverter"></converter:NullBoleanToBooleanConverter>
    <converter:IsClientCompanyConverter x:Key="CharToCompanyConverter"></converter:IsClientCompanyConverter>
    <converter:InvertedBooleanToVisibility x:Key="InvertedBooleanToVisibility"></converter:InvertedBooleanToVisibility>
    <converter:BoolToVisiblityConverter x:Key="BooleanToVisibility"></converter:BoolToVisiblityConverter>
    <converter:DateTimeToTimeSpanConverter x:Key="DateTimeToTimeSpanConverter"></converter:DateTimeToTimeSpanConverter>
    <Color x:Key="detailMark">#FFA1A9B3</Color>

    <Style x:Key="DirectionWidth" TargetType="{x:Type KarveControls:DataField}">
        <Setter Property="Width" Value="200" />
    </Style>
    <SolidColorBrush x:Key="detailMarkBrush" Color="{StaticResource ResourceKey=detailMark}" />
    
        <Style x:Key="flatTextBox" TargetType="{x:Type TextBox}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Grid>
                            <Rectangle  Stroke="{StaticResource ResourceKey=detailMarkBrush}" StrokeThickness="1"/>
                            <TextBox Margin="1" Text="{TemplateBinding Text}" BorderThickness="0"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ObjectDataProvider x:Key="FilterMode"
                                                    MethodName="GetValues"
                                                    ObjectType="{x:Type system:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="Syncfusion:FilterMode" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
        <Style x:Key="DelegationCodeStyle" TargetType="Syncfusion:GridFilterControl">
            <Setter Property="FilterMode" Value="Both" />
        </Style>


    <DataTemplate x:Key="Drivers">
        <Grid>
            <GroupBox Header="Conductores">
                <Grid x:Name="Layout">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>

                    <KarveControls:DualFieldSearchBox
                                    Grid.Row="0"
                                    DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    ButtonImage="/MasterModule;component/Images/search.png"
                                    LabelText="{Binding ConductorDe, Source={StaticResource ResourceLanguage}}"
                                    DataFieldFirst = "CLIENTEFAC"
                                    AssistTableName = "CLIENT_DRIVER"
                                    ItemChangedCommand="{Binding ItemChangedCommand}"
                                    MagnifierCommand="{Binding AssistCommand}" 
                                    AssistProperties="Code,Name,Direction,Zip,City,Telefono,CellPhone,Email,CreditCardType,NumberCreditCard,AccountableAccount"
                                    IsReadOnlySecond="True"   
                                    LabelTextWidth="80"
                                    Height="30"
                                    TextContentFirstWidth="80"
                                    TextContentSecondWidth="150"
                                    SourceView="{Binding ClientHelper.DriversDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />

                    <CheckBox Content="Sin Permiso de conducir"
                                                         Margin="10,0,0,0"
                                                          Height="30" 
                                                         Grid.Row="1"  
                                                         KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay}"
                                                         KarveControls:ControlExt.DataSourcePath="SINPERMISODECONDUCIR" VerticalAlignment="Bottom"/>


                    <StackPanel x:Name="DrivingLicenseLayout" Grid.Row="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <DockPanel x:Name="Permission" Grid.Row="0">
                                <KarveControls:DataField DockPanel.Dock ="Left" 
                                        DataSourcePath="CLASE" 
                                                  DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="Permiso"
                                                  LabelTextWidth="50"
                                                  Margin="0,5,0,0"
                                                  Height="30"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="250"
                                                  IsReadOnly="False">
                                </KarveControls:DataField>
                                <KarveControls:DataField DockPanel.Dock ="Right"  
                                                     DataSourcePath="permiso" 
                                                    DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="{Binding lnumero, Source={StaticResource ResourceLanguage}}"
                                                  LabelTextWidth="50"
                                                  Margin="0,5,0,0"
                                                  Height="30"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="250"
                                                  IsReadOnly="False">
                                </KarveControls:DataField>
                            </DockPanel>
                            <Grid Grid.Row="1" x:Name="ExpedienteNif">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"></RowDefinition>
                                    <RowDefinition Height="Auto"></RowDefinition>
                                    <RowDefinition Height="Auto"></RowDefinition>
                                    <RowDefinition Height="Auto"></RowDefinition>

                                </Grid.RowDefinitions>
                                <KarveControls:DataDatePicker Grid.Column="0" Grid.Row="0" LabelText="Fecha Exp. NIF" 
                                                              Height="35" MinWidth="100"
                                                          LabelTextWidth="100"
                                                              KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              KarveControls:ControlExt.DataSourcePath="FEDNI" Margin="10,8,4,8" Width="Auto" />
                                <KarveControls:DataField Grid.Column="1" Grid.Row="0"  DataSourcePath="LUDNI" 
                                                  DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="En"
                                                  LabelTextWidth="30"
                                                  Margin="21,8,-5,13"
                                                  Height="30"                                                    
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="250"
                                                  IsReadOnly="False"/>

                                <KarveControls:DataDatePicker Grid.Column="0" Grid.Row="1"
                                                          LabelText="{Binding BirthDate, Source={StaticResource ResourceLanguage}}"
                                                  LabelTextWidth="150"
                                                              Height="35" 
                                                              KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              KarveControls:ControlExt.DataSourcePath="FENAC" Margin="10,47,1,3" Width="Auto" Grid.RowSpan="2" />

                                <KarveControls:DataField Grid.Column="1" Grid.Row="1"  
                                                     DataSourcePath="LUNACI" 
                                                  DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="En"
                                                  LabelTextWidth="30"
                                                  
                                                   Margin="21,12,-18,8"
                                                  Height="30"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="250"
                                                  IsReadOnly="False" Width="465.758">
                                </KarveControls:DataField>
                                <KarveControls:DataDatePicker Grid.Column="0" Grid.Row="1" LabelText="Fecha Exp. Permiso" 
                                                              Height="35" MinWidth="250"
                                                            LabelTextWidth="150"
                                                    
                                                          KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              KarveControls:ControlExt.DataSourcePath="FEEXPE" Margin="10,5,0,9" Width="Auto" />
                                <KarveControls:DataField Grid.Column="1" Grid.Row="2"  
                                                     DataSourcePath="LUEXPE" 
                                                  DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="En"
                                                  LabelTextWidth="30"
                                                  Margin="21,16,-12,12"
                                                  Height="30"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="250"
                                                  IsReadOnly="False"/>

                                <KarveControls:DataDatePicker 
                                 Grid.Column="0" Grid.Row="3"
                                DockPanel.Dock ="Left" LabelText="Fecha Cad. Permiso"
                                LabelTextWidth="150"
                                                              Height="35" MinWidth="250"
                                                              KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              KarveControls:ControlExt.DataSourcePath="FECAU" Margin="10,11,14,13" Width="Auto" />
                                <KarveControls:DataField  Grid.Column="1" Grid.Row="3"  
                                                     DataSourcePath="NRC" 
                                                  DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="NRC"
                                                  LabelTextWidth="30"
                                                  Height="30"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="250"
                                                  IsReadOnly="False" Margin="21,14,-1,14"/>

                            </Grid>
                        </Grid>
                    </StackPanel>
                </Grid>
            </GroupBox>
        </Grid>
    </DataTemplate>
    <DataTemplate x:Key="CompanyDrivers">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
            </Grid.RowDefinitions>
            <Button Grid.Row="0" Command="{Binding ContentAreaCommand, Mode=OneWay}" HorizontalAlignment="Left" Margin="0,0,-1,0" Width="301">
                <StackPanel>
                    <TextBlock HorizontalAlignment="Center" Text="{Binding ListaConductores, Source={StaticResource ResourceLanguage}}"></TextBlock>
                    <Image HorizontalAlignment="Center" Source="/MasterModule;component/Images/companyDrivers.jpg" Height="80" Width="243"/>
                </StackPanel>
            </Button>

            <KarveControls:DataArea x:Name="ContentArea" 
                                        Grid.Row="1"
                                        DataAreaWidth="400"                                        
                                        DataAreaTitle="{Binding ListaDeContactos, Source={StaticResource ResourceLanguage}}"
                                        HorizontalAlignment="Left"
                                        LabelVisible="False"
                                        TextContent="{Binding ListaDeContactos, Mode=TwoWay, 
                                            ValidatesOnDataErrors=True, 
                                            ValidatesOnNotifyDataErrors=True, 
                                            ValidatesOnExceptions=True, 
                                            UpdateSourceTrigger=PropertyChanged}"
                                        KarveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand}"
                                     
                                        KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="120"
                                    Width="500"
                                        />




        </Grid>
    </DataTemplate>
    <DataTemplate x:Key="ProviderUpperBar">
        <Grid>
            <GroupBox Header="{Binding lgeneral, Source={StaticResource ResourceLanguage}}">
                <StackPanel Name="ContextLayout" Orientation="Horizontal">

                    <KarveControls:DataField x:Name="NumeroSupplier" IsReadOnly="True" 
                                         TextContentWidth="100" DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         ItemChangedCommand="{Binding ItemChangedCommand }"
                                         DataSourcePath="NUM_PROVEE" LabelTextWidth="50" LabelText="{Binding lnumero, Source={StaticResource ResourceLanguage}}" 
                                         LabelVisible="True">

                    </KarveControls:DataField>
                    <KarveControls:DataField x:Name="Persona" TextContentWidth="250" 
                                         LabelTextWidth="130"
                                         ItemChangedCommand="{Binding ItemChangedCommand }"
                                         DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" DataSourcePath="COMERCIAL" 
                                         LabelText="{Binding lcomercial, Source={StaticResource ResourceLanguage}}" LabelVisible="True">

                    </KarveControls:DataField>
                    <KarveControls:DataField x:Name="Nif" 
                                         TextContentWidth="100" 
                                         ItemChangedCommand="{Binding ItemChangedCommand }"
                                         DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" DataSourcePath="NIF" LabelTextWidth="50" LabelText="{Binding lnif, Source={StaticResource ResourceLanguage}}" LabelVisible="True">

                    </KarveControls:DataField>
                    <KarveControls:DualFieldSearchBox x:Name="TipoProveSearch" 
                                                  TextContentSecondWidth="180"
                                                  TextContentFirstWidth="50"
                                                  LabelTextWidth="100"
                                                  LabelText="{Binding ltipoproveedor, Source={StaticResource ResourceLanguage}}" 
                                                  Height="25"
                                                  ItemChangedCommand="{Binding ItemChangedCommand }"
                                                  LabelVisible="True"
                                                  AssistProperties="Codigo,Nombre"
                                                  MagnifierCommand="{Binding AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  SourceView="{Binding  DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataFieldFirst="TIPO"
                                                  AssistTableName="TIPOPROVE"
                                                  AssistDataFieldFirst="NUM_TIPROVE"
                                                  AssistDataFieldSecond="NOMBRE"
                                                  ButtonImage="/MasterModule;component/Images/supplier.png">
                    </KarveControls:DualFieldSearchBox>
                </StackPanel>
            </GroupBox>
        </Grid>
    </DataTemplate>
    <DataTemplate x:Key="VehicleUpperView">
        <Grid>
            <GroupBox Header="{Binding lgeneral, Source={StaticResource ResourceLanguage}}">
                <Grid Name="ContextLayout">
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <av:WrapPanel Grid.Row="0">
                        <KarveControls:DataField x:Name="Codigo"  
                                     IsReadOnly="True"
                                     DataFieldHeight="30"
                                     TextContentWidth="100" DataObject="{Binding DataObject, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                     DataSourcePath="CODIINT" LabelTextWidth="50"
                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                                 LabelText="{x:Static properties:Resources.lcodigo}" LabelVisible="True">
                           
                            

                        </KarveControls:DataField>
                        <KarveControls:DataField x:Name="Matricula" 
                                     DataFieldHeight="30"
                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                     TextContentWidth="100" DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     DataSourcePath="MATRICULA" LabelTextWidth="60" LabelText="{Binding lmatricula, Source={StaticResource ResourceLanguage}}" LabelVisible="True">
                        </KarveControls:DataField>
                        <KarveControls:DualFieldSearchBox x:Name="Marca"
                                              TextContentFirstWidth="50"
                                              TextContentSecondWidth="150"
                                              Height="30"
                                              LabelTextWidth="50"
                                              LabelText="{Binding lmarca, Source={StaticResource ResourceLanguage}}"
                                              AssistProperties="Code,Name"
                                              AssistTableName="MARCAS"
                                              IsReadOnlySecond="True"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding Path=BrandDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              DataFieldFirst="Mar"
                                              AssistDataFieldSecond="NOMBRE"
                                              AssistDataFieldFirst="CODIGO"
                                              ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, 
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              MagnifierCommand="{Binding  AssistCommand, Mode=OneWay, 
                                                                 UpdateSourceTrigger=PropertyChanged}"
                                              ButtonImage="/MasterModule;component/Images/search.png">


                        </KarveControls:DualFieldSearchBox>

                <KarveControls:DualFieldSearchBox x:Name="Modelo"
                                                  TextContentFirstWidth="50"
                                                  TextContentSecondWidth="150"
                                                  LabelTextWidth="50"
                                                  Height="30"
                                                  LabelText="{Binding lmodelo, Source={StaticResource ResourceLanguage}}"
                                                  AssistTableName="MODELO"
                                                  IsReadOnlySecond="True"
                                                  DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  SourceView="{Binding Path=ModelDtos, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataFieldFirst="MO1"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  MagnifierCommand="{Binding  AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"                                                  
                                                  AssistProperties="Codigo,Nombre,Marca,NomeMarca,Variante,Categoria,Chassis,Referencia"
                                                  ButtonImage="/MasterModule;component/Images/search.png">
                            <i:Interaction.Behaviors>        
                    <behaviour:VehicleModelChangeBehavior RelatedBrandObject="{Binding ElementName=Marca}" RelatedVariantObject="{Binding ElementName=Variante}">
                                
                            </behaviour:VehicleModelChangeBehavior>
                            </i:Interaction.Behaviors>
                        </KarveControls:DualFieldSearchBox>
                        <KarveControls:DataField x:Name="Variante" 
                                         DataFieldHeight="30"
                                         ItemChangedCommand="{Binding ItemChangedCommand}"
                                         TextContent="{Binding ElementName=Modelo, Path=SelectedObject.Variante, Mode=TwoWay}"
                                         TextContentWidth="100" 
                                         DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                         LabelTextWidth="60" LabelText="{Binding lvariante, Source={StaticResource ResourceLanguage}}" LabelVisible="True">
                        </KarveControls:DataField>

                    </av:WrapPanel>
                    <WrapPanel Grid.Row="1">
                        <KarveControls:DualFieldSearchBox x:Name="Grupo"
                                              TextContentFirstWidth="50"
                                              TextContentSecondWidth="198"
                                              LabelTextWidth="50"
                                              Height="30"
                                              LabelText="{x:Static properties:Resources.lgrupo}"
                                              IsReadOnlySecond="True"
                                              AssistProperties="Codigo,Nombre"
                                              AssistTableName="GRUPOS"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding Path=VehicleGroupDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              DataFieldFirst="GRUPO"
                                              AssistDataFieldSecond="NOMBRE"
                                              AssistDataFieldFirst="CODIGO"
                                              ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              MagnifierCommand="{Binding  AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"                                         
                                              ButtonImage="/MasterModule;component/Images/search.png">

                        </KarveControls:DualFieldSearchBox>

                        <KarveControls:DataField Height="30" 
                                            LabelText="{Binding lbastidor, Source={StaticResource ResourceLanguage}}" LabelTextWidth="50"  TextContentWidth="200" 
                                                  ItemChangedCommand="{Binding ItemChangedCommand}"
                                                  DataObject="{Binding Path=DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataSourcePath="BASTIDOR">

                        </KarveControls:DataField>
                        <KarveControls:DualFieldSearchBox x:Name="Colore" 
                                              DataFieldFirst="COLOR"
                                              AssistTableName="COLORFL"
                                              LabelTextWidth="50"
                                              Height="30"
                                              LabelText="{Binding lcolor, Source={StaticResource ResourceLanguage}}"
                                              TextContentFirstWidth="50"
                                              TextContentSecondWidth="100"
                                              IsReadOnlySecond="True"
                                              AssistDataFieldFirst="codigo"
                                              AssistDataFieldSecond="nombre" 
                                              AssistProperties="Code,Name"
                                              ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              MagnifierCommand="{Binding  AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                              ButtonImage="/MasterModule;component/Images/search.png"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding Path=ColorDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                        </KarveControls:DualFieldSearchBox>
                    </WrapPanel>
                </Grid>
            </GroupBox>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="NoDataEmailField">
        <StackPanel Orientation="Horizontal">
            <KarveControls:DataField x:Name="EmailField" 
                                                     DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     TextContentWidth="200"
                                                     LabelTextWidth="0"
                                                     LabelVisible="False"
                                                     DataAllowed="Email"
                                                     ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                     IsReadOnly="False"
                                                     >



            </KarveControls:DataField>
            <Button Command="{Binding EmailCommand}" CommandParameter="{Binding TextContent, ElementName=EmailField}">
                <Image Source="/MasterModule;component/Images/email.png" Width="19"/>

            </Button>
        </StackPanel>
    </DataTemplate>
        <DataTemplate x:Key="UpperBarVehicle">
    <Grid>
        <GroupBox Header="{Binding lgeneral, Source={StaticResource ResourceLanguage}}">
            <Grid Name="ContextLayout">
                <Grid.RowDefinitions>
                    <RowDefinition></RowDefinition>
                    <RowDefinition></RowDefinition>
                </Grid.RowDefinitions>
                <WrapPanel Grid.Row="0">
                        <KarveControls:DataField x:Name="Codigo"  
                                     IsReadOnly="True"
                                     DataFieldHeight="30"
                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                     TextContent="{Binding DataObject.CODEIINT, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                     TextContentWidth="100" 
                                     DataObject="{Binding DataObject, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                     LabelTextWidth="50" 
                                     LabelText="{Binding lcodigo, Source={StaticResource ResourceLanguage}}"
                                     LabelVisible="True">
                        </KarveControls:DataField>
                        <KarveControls:DataField x:Name="Matricula" 
                                     DataFieldHeight="30"
                                     TextContent="{Binding DataObject.MATRICULA, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                     TextContentWidth="100" DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     LabelTextWidth="60" 
                                     LabelText="{Binding lmatricula, Source={StaticResource ResourceLanguage}}" 
                                     LabelVisible="True">
                        </KarveControls:DataField>
                    <KarveControls:DualFieldSearchBox x:Name="Marca"
                                              TextContentFirstWidth="50"
                                              TextContentSecondWidth="150"
                                              Height="30"
                                              LabelTextWidth="50"
                                              LabelText="{Binding lmarca, Source={StaticResource ResourceLanguage}}"
                                              AssistProperties="Code,Name"
                                              AssistTableName="MARCAS"
                                              IsReadOnlySecond="True"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding Path=DataObject.BrandDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              DataFieldFirst="MAR"
                                              AssistDataFieldSecond="NOMBRE"
                                              AssistDataFieldFirst="CODIGO"
                                             
                                              ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              MagnifierCommand="{Binding  AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              ButtonImage="/MasterModule;component/Images/search.png">


                    </KarveControls:DualFieldSearchBox>


                    <KarveControls:DualFieldSearchBox x:Name="Modelo"
                                                  TextContentFirstWidth="50"
                                                  TextContentSecondWidth="150"
                                                  LabelTextWidth="50"
                                                  Height="30"
                                                  LabelText="{Binding lmodelo, Source={StaticResource ResourceLanguage}}"
                                                  AssistQuery="{Binding AssistQueryModel, Mode=OneWay}"
                                                  AssistProperties="Codigo,Nombre,Marca,Variante,NomeMarca,Nombre"
                                                  AssistTableName="MODELO"
                                                  IsReadOnlySecond="True"
                                                  DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  SourceView="{Binding Path=DataObject.ModelDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  
                                                      DataFieldFirst="MODELO"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  MagnifierCommand="{Binding  AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"                                                  
                                                  AssistDataFieldSecond="Nombre"
                                                  AssistDataFieldFirst="Code"
                                                  ButtonImage="/MasterModule;component/Images/search.png">
                    </KarveControls:DualFieldSearchBox>
                    <KarveControls:DataField x:Name="Variante" 
                                         DataFieldHeight="30"
                                         TextContent="{Binding ElementName=Modelo, Path=SelectedItem.Variante}"
                                         TextContentWidth="100" DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                         LabelTextWidth="60" LabelText="{Binding lvariante, Source={StaticResource ResourceLanguage}}" LabelVisible="True">
                    </KarveControls:DataField>

                </WrapPanel>
                <WrapPanel Grid.Row="1">




                    <KarveControls:DualFieldSearchBox x:Name="Grupo"
                                              TextContentFirstWidth="50"
                                              TextContentSecondWidth="198"
                                              LabelTextWidth="50"
                                              Height="30"
                                              LabelText="{Binding lgrupo, Source={StaticResource ResourceLanguage}}"
                                              IsReadOnlySecond="True"
                                              AssistProperties="Codigo,Nombre"
                                              AssistTableName="GRUPOS"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding Path=DataObject.VehicleGroupDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              DataFieldFirst="GRUPO"
                                              AssistDataFieldSecond="NOMBRE"
                                              AssistDataFieldFirst="CODIGO"
                                              ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              MagnifierCommand="{Binding  AssistUpperCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"                                         
                                              ButtonImage="/MasterModule;component/Images/search.png">

                    </KarveControls:DualFieldSearchBox>

                    <KarveControls:DataField Height="30" 
                                            LabelText="{Binding lbastidor, Source={StaticResource ResourceLanguage}}" LabelTextWidth="50"  TextContentWidth="200" 
                                                  ItemChangedCommand="{Binding ItemChangedCommand}"
                                             TextContent="{Binding Path=DataObject.BASTIDOR, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"     
                                             DataObject="{Binding Path=DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             >

                    </KarveControls:DataField>
                    <KarveControls:DualFieldSearchBox x:Name="Colore" 
                                              DataFieldFirst="COLOR"
                                              AssistTableName="COLORFL"
                                              LabelTextWidth="50"
                                              Height="30"
                                              LabelText="{Binding lcolor, Source={StaticResource ResourceLanguage}}"
                                              TextContentFirstWidth="50"
                                              TextContentSecondWidth="100"
                                              IsReadOnlySecond="True"
                                              AssistDataFieldFirst="codigo"
                                              AssistDataFieldSecond="nombre" 
                                              AssistProperties="Code,Name"
                                              ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              MagnifierCommand="{Binding  AssistUpperCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                              ButtonImage="/MasterModule;component/Images/search.png"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding Path=DataObject.ColorDtos, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                    </KarveControls:DualFieldSearchBox>
                </WrapPanel>
            </Grid>
        </GroupBox>
    </Grid>
    </DataTemplate>

    <DataTemplate x:Key="GeneralInfo">
         <Grid>
            <Grid.Resources>
                <system:String x:Key="SearchImage">/MasterModule;component/Images/search.png</system:String>
            </Grid.Resources>
            <StackPanel Orientation="Vertical">
            <KarveControls:DataField  DataSourcePath="NOMBRE" 
						      TextContent="{Binding DataObject.NOMBRE, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                      DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      LabelText="{Binding lnombre, Source={StaticResource ResourceLanguage}}"
                                                      LabelTextWidth="150"
                                                      ItemChangedCommand="{Binding ItemChangedCommand}"
                                                      TextContentWidth="400"
                                                      Margin="0,5,0,0"
                                                      IsReadOnly="False">

            </KarveControls:DataField>
            <KarveControls:DataField  DataSourcePath="DIRECCION" 
                                                  DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  LabelText="{Binding ldireccion, Source={StaticResource ResourceLanguage}}"
                                                  LabelTextWidth="150"
                                                  Margin="0,5,0,0"
                                                  ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentWidth="400"
                                                  IsReadOnly="False">
            </KarveControls:DataField>
            <Grid  VerticalAlignment="Top" HorizontalAlignment="Left">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <KarveControls:DualFieldSearchBox x:Name="CitySearchBox"
                                                          DataFieldFirst="CP"
                                                          AssistTableName="CITY_ASSIST"
                                                          AssistProperties="Code,Poblacion"
                                                          LabelText="{Binding lpoblacion, Source={StaticResource ResourceLanguage}}"
                                                          Margin="0,5,-29,0"
                                                          LabelTextWidth="135"       
				    			                          ItemChangedCommand="{Binding ItemChangedCommand}"
                                                          MagnifierCommand="{Binding AssistCommand}"
                                                          IsReadOnlySecond="True"
                                                          TextContentFirstWidth="100"
                                                          TextContentSecondWidth="300"
                                                          ButtonImage="{StaticResource SearchImage}"
                                                          SourceView="{Binding Path=ClientHelper.CityDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.ColumnSpan="2"/>

            </Grid>
            <KarveControls:DualFieldSearchBox DataFieldFirst="PROVINCIA"
                                                          AssistTableName="PROVINCE_ASSIST"
                                                          AssistProperties="Code,Name"
                                                          LabelText="{Binding lprovincia, Source={StaticResource ResourceLanguage}}"
                                                          LabelTextWidth="135"
                                                          Margin="0,5,0,0"
                                                          IsReadOnlySecond="True"
                                                          TextContentFirstWidth="100"
                                                          TextContentSecondWidth="300"
                                                          MagnifierCommand="{Binding AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          ButtonImage="{StaticResource SearchImage}"
                                                          SourceView="{Binding Path=ClientHelper.ProvinciaDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            </KarveControls:DualFieldSearchBox>
            <KarveControls:DualFieldSearchBox LabelText="{Binding lpais, Source={StaticResource ResourceLanguage}}" 
                                                                LabelTextWidth="135" 
                                                                DataFieldFirst="NACIODOMI" 
                                                                AssistTableName="COUNTRY_ASSIST"
                                                                AssistProperties="Code,CountryName"
                                                                TextContentFirstWidth="100"
                                                                TextContentSecondWidth="300"
                                                                IsReadOnlySecond="True"
                                                                MagnifierCommand="{Binding AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                                ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                                DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                SourceView="{Binding Path=ClientHelper.CountryDto, UpdateSourceTrigger=PropertyChanged}"
                                                                ButtonImage="{StaticResource SearchImage}">
            </KarveControls:DualFieldSearchBox>


            <KarveControls:DataField  DataSourcePath="TELEFONO" 
                                                      DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      LabelText="{Binding ltelefono, Source={StaticResource ResourceLanguage}}"
                                                      LabelTextWidth="150"
                                                      ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                      TextContentWidth="400"
                                                      Margin="0,5,0,0"
                                                      IsReadOnly="False"/>
            <KarveControls:DataField  DataSourcePath="FAX" 
                                                      DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      LabelText="Fax"
                                                      LabelTextWidth="150"
                                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                      TextContentWidth="400"
                                                      Margin="0,5,0,0"
                                                      IsReadOnly="False"/>

            <KarveControls:DataField  DataSourcePath="MOVIL" 
                                                      DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      LabelText="{Binding lmovil, Source={StaticResource ResourceLanguage}}"
                                                      ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                      LabelTextWidth="150"
                                                      TextContentWidth="400"
                                                      Margin="0,5,0,0"
                                                      IsReadOnly="False"/>
            <KarveControls:DataField  DataSourcePath="PASAPORTE" 
                                          DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                          LabelText="Pasaporte"
                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                          LabelTextWidth="150"
                                          TextContentWidth="400"
                                          Margin="0,5,0,0"
                                          IsReadOnly="False"/>
            <StackPanel Orientation="Horizontal">
                <KarveControls:DataField  DataSourcePath="COORDGPS" 
                                          DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                          LabelText="{Binding lposicionGPS, Source={StaticResource ResourceLanguage}}" 
                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                          LabelTextWidth="150"
                                          TextContentWidth="400"
                                          Margin="0,5,0,0"
                                          IsReadOnly="False"/>
                <Button Command="{Binding LaunchMap, Mode=OneWay}" Height="35" Width="30">
                    <Image Source="/MasterModule;component/Images/maps.png" Height="24">
                    </Image>
                </Button>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <KarveControls:DataField  DockPanel.Dock="Left" DataSourcePath="WEB" 
                                                      DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      LabelText="{Binding lwebsite, Source={StaticResource ResourceLanguage}}"
                                                      LabelTextWidth="150"
                                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                      TextContentWidth="400"
                                                      Margin="0,5,0,0"
                                                      IsReadOnly="False" Width="563">
                </KarveControls:DataField>
                <Button Command="{Binding ClickSearchWebAddressCommand}" CommandParameter="{Binding DataObject.Value.WEB}">
                    <Image Source="/MasterModule;component/Images/web.png" Height="19"/>
                </Button>

            </StackPanel>
  
            <StackPanel Orientation="Horizontal">
                <KarveControls:DataField x:Name="EmailField" 
                                                     LabelText="{Binding lemail, Source={StaticResource ResourceLanguage}}"
                                                     DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     LabelTextWidth="150"
                                                     TextContentWidth="400"
                                                     LabelVisible="True"
                                                     DataAllowed="Email"
                                                     ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                     IsReadOnly="False"
                                                     DataSourcePath="EMAIL">



                </KarveControls:DataField>
                <Button Command="{Binding EmailCommand}" CommandParameter="{Binding TextContent, ElementName=EmailField}">
                    <Image Source="/MasterModule;component/Images/email.png" Width="19"/>

                </Button>

            </StackPanel>


            <StackPanel Orientation="Horizontal">
                <KarveControls:DataDatePicker LabelText="{Binding StringConstants_FechaDeAlta, Source={StaticResource ResourceLanguage}}"
                                                              DataDatePickerHeight="30" 
                                                              LabelTextWidth="100" 
                                                              LabelVisible="True"
                                                              Margin="155,0,0,0"
                                                              PickerContentWidth="100"
                                                              KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              KarveControls:ControlExt.DataSourcePath="ALTA"
                                                              >

                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="DataDatePickerChanged">
                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </KarveControls:DataDatePicker>
                <KarveControls:DataDatePicker LabelText="{Binding StringConstants_FechaDeBaja, Source={StaticResource ResourceLanguage}}"
                                                              LabelVisible="True"
                                                              LabelTextWidth="100" 
                                                              PickerContentWidth="100" 
                                                              DataDatePickerHeight="30"
                                                              KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              KarveControls:ControlExt.DataSourcePath="BAJA">

                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="DataFieldChanged">
                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </KarveControls:DataDatePicker>
            </StackPanel>
            <KarveControls:DualFieldSearchBox DataFieldFirst="SUBLICEN"
                                                          AssistTableName="COMPANY_ASSIST"
                                                          AssistProperties="Code,Name"
                                                          LabelText="{Binding lempresa, Source={StaticResource ResourceLanguage}}"
                                                          Margin="0,5,0,0"
                                                          LabelTextWidth="150"
                                                          IsReadOnlySecond="True"
                                                          TextContentFirstWidth="100"
                                                          TextContentSecondWidth="300"
                                                          MagnifierCommand="{Binding AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          ButtonImage="{StaticResource SearchImage}"
                                                          SourceView="{Binding Path=ClientHelper.CompanyDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

            </KarveControls:DualFieldSearchBox>
            <KarveControls:DualFieldSearchBox DataFieldFirst="OFICINA"
                                                          AssistTableName="OFFICE_ASSIST"
                                                          AssistProperties="Codigo,Nombre"
                                                          LabelText="{Binding loficinas, Source={StaticResource ResourceLanguage}}"
                                                          Margin="0,5,0,0"
                                                          LabelTextWidth="150"
                                                          Height="35"
                                                          IsReadOnlySecond="True"
                                                          TextContentFirstWidth="100"
                                                          TextContentSecondWidth="300"
                                                          MagnifierCommand="{Binding AssistCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          ButtonImage="{StaticResource SearchImage}"
                                                          SourceView="{Binding Path=ClientHelper.OfficeDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                          DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

            </KarveControls:DualFieldSearchBox>
        </StackPanel>
    </Grid>
    </DataTemplate>
    
<DataTemplate x:Key="Risk">
        <Grid Margin="10,10,0,0"
              VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <KarveControls:DataField x:Name="Risk"   
                                     LabelText="Riesgo" 
                                     LabelVisible="True" 
                                     LabelTextWidth="103"
                                     Height="30"
                                     Grid.Column="0"
                                     TextContent="{Binding DataObject.RIESGOIMP, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                     DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     TextContentWidth="200"/>
            <Syncfusion:CurrencyTextBox 
                x:Name="CurrentBox" Grid.Column="0" 
                CurrencyGroupSeparator="," 
                CurrencyDecimalSeparator="." 
                CurrencySymbol="€" 
                HorizontalAlignment="Left" Height="23"  
                Text="€" 
                Value="{Binding DataObject.RIESGO, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                KarveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay}"
                KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=OneWay}"
                KarveControls:ControlExt.DataSourcePath="RIESGO"
                VerticalAlignment="Top" Width="100" Margin="312,3,0,0" Grid.ColumnSpan="2"/>
        </Grid>
    </DataTemplate>
    <DataTemplate x:Key="ClientBilling">
        <Grid x:Name="BillingLayout">
            <Grid.Resources>
                <ResourceDictionary>
                </ResourceDictionary>

            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>

            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <ContentControl ContentTemplate="{StaticResource Risk}" Grid.Row="0" Grid.Column="0"></ContentControl>
             <KarveControls:DataField x:Name="ImportePendiente"   
                                         LabelText="Importe Pendiente" LabelVisible="True" 
                                         LabelTextWidth="120"
                                         TextContent="{Binding PendentSum}"
                                         Height="35"
                                         ItemChangedCommand="{Binding ItemChangedCommand}"
                                         IsReadOnly="False"
                                         TextContentWidth="200"/>
                <KarveControls:DataField x:Name="CompanyCode"    Grid.Row="0" Grid.Column="1"
                                         LabelText="Codigo Sociedad" 
                                         LabelVisible="True" 
                                         LabelTextWidth="112"
                                         DataSourcePath="COD_SOCIEDAD"
                                         Height="35"
                                         ItemChangedCommand="{Binding ItemChangedCommand}"
                                         TextContentWidth="200"/>

                <KarveControls:DualFieldSearchBox
                     Grid.Row="0" Grid.Column="2"
                    LabelText ="Forma de Pago"
                    LabelVisible="True"
                    LabelTextWidth="100"
                    DataFieldFirst="FPAGO"
                    AssistDataFieldFirst="CODIGO" 
                    AssistDataFieldSecond="NOMBRE"
                    AssistTableName="CLIENT_PAYMENT_FORM"
                    AssistProperties="Codigo,Nombre"
                    TextContentFirstWidth="100"
                    TextContentSecondWidth="200"
                    MagnifierCommand="{Binding AssistCommand}"
                    ItemChangedCommand="{Binding ItemChangedCommand}"
                    DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    ButtonImage="{Binding ButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    SourceView="{Binding ClientHelper.ClientPaymentForm, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                </KarveControls:DualFieldSearchBox>


            
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel  Orientation="Horizontal" Grid.ColumnSpan="2">
                    <TextBlock Text="{Binding lplazodepago, Source={StaticResource ResourceLanguage}}" Margin="10,0,0,10"></TextBlock>
                    <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="PLAZO"
                                             LabelVisible="False"
                                             TextContentWidth="50"
                                             Margin="0,5,0,0"
                                             Height="30"
                                             ItemChangedCommand="{Binding ItemChangedCommand}">

                    </KarveControls:DataField>

                    <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="PLAZO2"
                                             LabelVisible="False"
                                             TextContentWidth="50"
                                             Height="30"
                                             Margin="0,5,0,0"
                                             ItemChangedCommand="{Binding ItemChangedCommand}">

                    </KarveControls:DataField>
                    <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="PLAZO2"
                                             LabelVisible="False"
                                             Margin="0,5,0,0"
                                             TextContentWidth="50"
                                             Height="30"
                                             ItemChangedCommand="{Binding ItemChangedCommand}">

                    </KarveControls:DataField>
                    <TextBlock Text="{Binding ldiadepago, Source={StaticResource ResourceLanguage}}" Margin="5,0,0,5"></TextBlock>
                    <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="DIA"
                                             Margin="0,5,0,0"
                                             LabelVisible="False"
                                             TextContentWidth="50"
                                             Height="30"
                                             ItemChangedCommand="{Binding ItemChangedCommand}">

                    </KarveControls:DataField>

                    <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="DIA2"
                                             Margin="0,5,0,0"
                                             LabelVisible="False"
                                             TextContentWidth="50"
                                             Height="30"
                                             ItemChangedCommand="{Binding ItemChangedCommand}">

                    </KarveControls:DataField>


                    <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="DIA3"
                                             Margin="0,5,0,0"
                                             LabelVisible="False"
                                             TextContentWidth="50"
                                             Height="30"
                                             ItemChangedCommand="{Binding ItemChangedCommand}">

                    </KarveControls:DataField>

                </StackPanel>

            </Grid>



            <KarveControls:DataField Grid.Row="3" Grid.Column="0"
                                     DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     DataSourcePath="DTO"
                                     Margin="0,5,0,0"
                                     LabelVisible="True"
                                     LabelText="{Binding ldescuento, Source={StaticResource ResourceLanguage}}"
                                     LabelTextWidth="90"
                                     TextContentWidth="100"
                                     Height="30"
                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>



        </Grid>

    </DataTemplate>


    <DataTemplate x:Key="VisitsGrid">
        <Syncfusion:SfDataGrid  x:Name="VisitsSummary"                           
                                                    ColumnSizer="AutoLastColumnFill"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="True"
                                                    AllowDeleting ="True"
                                                    AllowFiltering="True"
                                                    CellStyle="{StaticResource KarveGridCell}"
                                                    AlternatingRowStyle="{StaticResource KarveAlternatingRowStyle}"
                                                    AlternationCount="2"
                                                    HeaderStyle ="{StaticResource BasicHeaderStyle}"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="True"
                                                    AllowGrouping="True"
                                                    NavigationMode="Cell"
                                                    EditTrigger="OnTap"
                                                    AddNewRowPosition="Top"
                                                    KarveControls:ControlExt.DataSourcePath="Visits"
                                                    KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    KarveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.VisitsDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False">

            <Syncfusion:SfDataGrid.Resources>
                <ResourceDictionary>
                    <ResourceDictionary.MergedDictionaries>
                        <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                    </ResourceDictionary.MergedDictionaries>
                    <Style TargetType="Syncfusion:AddNewRowControl">
                        <Setter Property="FontSize" Value="12" />
                        <Setter Property="Foreground" Value="#FF808080" />
                        <Setter Property="BorderBrush" Value="#FF7fd0de" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Syncfusion:AddNewRowControl">
                                    <Grid>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="AddNewRowStates">
                                                <VisualState x:Name="Normal" />
                                                <VisualState x:Name="Edit">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="HasError">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="NoError">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                            <VisualStateGroup x:Name="BorderStates">
                                                <VisualState x:Name="NormalRow" />
                                                <VisualState x:Name="FooterRow">
                                                    <Storyboard BeginTime="0">
                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                                      Duration="1"
                                                                                                                      Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                                      Storyboard.TargetProperty="BorderThickness">
                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                        </ThicknessAnimationUsingKeyFrames>
                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                                      Duration="1"
                                                                                                                      Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                                      Storyboard.TargetProperty="Margin">
                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                        </ThicknessAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                            Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                            Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                        <Border x:Name="PART_InValidBorder"
                                                                            Margin="0,0,1,1"
                                                                            Background="Transparent"
                                                                            BorderBrush="Red"
                                                                            BorderThickness="1"
                                                                            Visibility="Collapsed" />
                                        <Border x:Name="PART_AddNewRowBorder"
                                                                            Background="{TemplateBinding Background}"
                                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                                            BorderThickness="{TemplateBinding BorderThickness}">
                                            <ContentPresenter />
                                        </Border>
                                        <Border x:Name="PART_AddNewRowTextBorder"
                                                                            Background="#FFE5E5E5"
                                                                            BorderBrush="Transparent"
                                                                            BorderThickness="0,0,1,1"
                                                                            Clip="{TemplateBinding TextBorderClip}"
                                                                            IsHitTestVisible="False">
                                            <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                          HorizontalAlignment="Left"
                                                                                          VerticalAlignment="Center"
                                                                                          Content="{TemplateBinding AddNewRowText}" />
                                        </Border>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ResourceDictionary>
            </Syncfusion:SfDataGrid.Resources>
            <i:Interaction.Behaviors>
              
                <gridbehavior:GridDefaultBehavior/>
            </i:Interaction.Behaviors>
            <Syncfusion:SfDataGrid.Columns>
                <Syncfusion:GridTemplateColumn HeaderText="{Binding lcontacto, Source={StaticResource ResourceLanguage}}"
                                                          
                                                                     
                                                                       MappingName="ContactsSource">
                    <Syncfusion:GridTemplateColumn.CellTemplate>


                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>


                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ContactsSource.ContactId,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                </TextBox>
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ContactsSource.ContactName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                <Button Grid.Column="2" Width="30" Command="{Binding Path=ContactsSource.ShowCommand,UpdateSourceTrigger=PropertyChanged}" CommandParameter="{Binding}">
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" 
                                                                                                  Param="{Binding}" />
                                    </i:Interaction.Behaviors>


                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.CellTemplate>

                    <Syncfusion:GridTemplateColumn.EditTemplate>
                        <DataTemplate>

                            <Grid>
                                <Grid.Resources>

                                </Grid.Resources>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ContactsSource.Code, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ContactsSource.Name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                <Button Grid.Column="2" Width="30" Syncfusion:FocusManagerHelper.FocusedElement="True">
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                    </i:Interaction.Behaviors>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.EditTemplate>


                </Syncfusion:GridTemplateColumn>

                <Syncfusion:GridCheckBoxColumn HeaderText="P" MappingName="IsOrder" />
                <Syncfusion:GridDateTimeColumn  
                                            AllowNullValue="True"
                                            HeaderText="{Binding lfecha, Source={StaticResource ResourceLanguage}}"
                                            MappingName="Date"
                                            />

                <Syncfusion:GridTemplateColumn HeaderText="{Binding lvendidor, Source={StaticResource ResourceLanguage}}"
                                                         
                                                             
                                                           MappingName="SellerSource">
                    <Syncfusion:GridTemplateColumn.CellTemplate>


                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>


                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=SellerSource.Code,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                </TextBox>
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=SellerSource.Name,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                <Button Grid.Column="2" Width="30" Command="{Binding Path=SellerSource.ShowCommand,UpdateSourceTrigger=PropertyChanged}" CommandParameter="{Binding}">
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ResellerMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" 
                                                                                                  Param="{Binding}" />
                                    </i:Interaction.Behaviors>


                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.CellTemplate>

                    <Syncfusion:GridTemplateColumn.EditTemplate>


                        <DataTemplate>

                            <Grid>
                                <Grid.Resources>

                                </Grid.Resources>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="50*"></ColumnDefinition>
                                    <ColumnDefinition Width="30*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0"  Text="{Binding Path=SellerSource.Code, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                                <TextBlock Grid.Column="1"  Text="{Binding Path=SellerSource.Name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                <Button Grid.Column="2">
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.SellerMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                    </i:Interaction.Behaviors>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.EditTemplate>


                </Syncfusion:GridTemplateColumn>
                <!--
                <Syncfusion:GridTemplateColumn HeaderText="{Binding lrbtnTiposVisita, Source={StaticResource ResourceLanguage}}" MappingName="VisitType">
                    <Syncfusion:GridTemplateColumn.CellTemplate>
                        <DataTemplate>

                            <Syncfusion:ComboBoxAdv ItemsSource="{Binding Path=DataContext.VisitTypeDto,
                                                                      
                                                                      RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, PresentationTraceSources.TraceLevel=High}"
                                                                    SelectedItem="{Binding VisitType, Mode=TwoWay}">
                                <Syncfusion:ComboBoxAdv.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20*"></ColumnDefinition>
                                                <ColumnDefinition Width="80*"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Background="White"  Grid.Column="0" Text="{Binding Code}"/>
                                            <TextBlock Margin="15,0,0,0" Grid.Column="1" Text="{Binding Name}"/>
                                        </Grid>
                                    </DataTemplate>
                                </Syncfusion:ComboBoxAdv.ItemTemplate>
              
                            </Syncfusion:ComboBoxAdv>

                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.CellTemplate>

                    <Syncfusion:GridTemplateColumn.EditTemplate>
                        <DataTemplate>

                            <Syncfusion:ComboBoxAdv ItemsSource="{Binding Path=DataContext.VisitTypeDto,
                                           
                                                                      RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, PresentationTraceSources.TraceLevel=High}"
                                                    SelectedItem="{Binding }">
                            </Syncfusion:ComboBoxAdv>

                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.EditTemplate>
                </Syncfusion:GridTemplateColumn>
                -->
                <Syncfusion:GridTextColumn HeaderText="{Binding ltext, Source={StaticResource ResourceLanguage}}" MappingName="Text">

                </Syncfusion:GridTextColumn>

            </Syncfusion:SfDataGrid.Columns>
        </Syncfusion:SfDataGrid>
    </DataTemplate>
    <DataTemplate x:Key="ContactGrid">
        <Syncfusion:SfDataGrid  x:Name="ContactsSummary"
                                                    ColumnSizer="Star"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="True"
                                                    AllowDeleting ="True"
                                                    AllowFiltering="True"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="True"
                                                    AllowGrouping="True"
                                                    NavigationMode="Cell"
                                                    CellStyle="{StaticResource KarveGridCell}"
                                                    AlternatingRowStyle="{StaticResource KarveAlternatingRowStyle}"
                                                    AlternationCount="2"
                                                    HeaderStyle ="{StaticResource BasicHeaderStyle}"                                                    
                                                    AddNewRowPosition="Top"
                                                    KarveControls:ControlExt.DataSourcePath="Contacts"
                                                    KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    KarveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.ContactsDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False"
                            >
            <i:Interaction.Behaviors>
                <gridbehavior:GridDefaultBehavior/>
            </i:Interaction.Behaviors>

            <Syncfusion:SfDataGrid.Resources>
                <ResourceDictionary>
                    <ResourceDictionary.MergedDictionaries>
                        <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                    </ResourceDictionary.MergedDictionaries>
                    <Style TargetType="Syncfusion:AddNewRowControl">
                        <Setter Property="FontSize" Value="12" />
                        <Setter Property="Foreground" Value="#FF808080" />
                        <Setter Property="BorderBrush" Value="#FF7fd0de" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Syncfusion:AddNewRowControl">
                                    <Grid>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="AddNewRowStates">
                                                <VisualState x:Name="Normal" />
                                                <VisualState x:Name="Edit">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="HasError">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="NoError">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                            <VisualStateGroup x:Name="BorderStates">
                                                <VisualState x:Name="NormalRow" />
                                                <VisualState x:Name="FooterRow">
                                                    <Storyboard BeginTime="0">
                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="BorderThickness">
                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                        </ThicknessAnimationUsingKeyFrames>
                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="Margin">
                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                        </ThicknessAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                    Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                    Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                        <Border x:Name="PART_InValidBorder"
                                                                    Margin="0,0,1,1"
                                                                    Background="Transparent"
                                                                    BorderBrush="Red"
                                                                    BorderThickness="1"
                                                                    Visibility="Collapsed" />
                                        <Border x:Name="PART_AddNewRowBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                            <ContentPresenter />
                                        </Border>
                                        <Border x:Name="PART_AddNewRowTextBorder"
                                                                    Background="#FFE5E5E5"
                                                                    BorderBrush="Transparent"
                                                                    BorderThickness="0,0,1,1"
                                                                    Clip="{TemplateBinding TextBorderClip}"
                                                                    IsHitTestVisible="False">
                                            <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                  HorizontalAlignment="Left"
                                                                                  VerticalAlignment="Center"
                                                                                  Content="{TemplateBinding AddNewRowText}" />
                                        </Border>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ResourceDictionary>
            </Syncfusion:SfDataGrid.Resources>


            <Syncfusion:SfDataGrid.Columns>

                <Syncfusion:GridTextColumn HeaderText="{Binding lnombre, Source={StaticResource ResourceLanguage}}" MappingName="ContactName"/>
              
                <Syncfusion:GridTemplateColumn HeaderText="{Binding lcargo, Source={StaticResource ResourceLanguage}}"
                                                                      
                                                                       AllowResizing="False"
                                                                       AllowEditing="False"
                                                                       MappingName="ResponsabilitySource">
                    <Syncfusion:GridTemplateColumn.CellTemplate>


                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>


                              <TextBox  Visibility="Collapsed" Grid.Column="0" Width="50" Text="{Binding Path=ResponsabilitySource.Code,Mode=TwoWay,PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}">

                                </TextBox>
                               
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ResponsabilitySource.Name,Mode=TwoWay,PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}"></TextBlock>

                                <Button Grid.Column="2" Width="30" >
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactChargeMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                    </i:Interaction.Behaviors>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.CellTemplate>

                    <Syncfusion:GridTemplateColumn.EditTemplate>


                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ResponsabilitySource.Code, Mode=TwoWay, PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ResponsabilitySource.Name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                <Button Grid.Column="2" Width="30" >
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactChargeMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                    </i:Interaction.Behaviors>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.EditTemplate>


                </Syncfusion:GridTemplateColumn>

                <Syncfusion:GridTextColumn HeaderText="{Binding ltelefono, Source={StaticResource ResourceLanguage}}" MappingName="Telefono"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding lmovil, Source={StaticResource ResourceLanguage}}" MappingName="Movil"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding lemail, Source={StaticResource ResourceLanguage}}" MappingName="Email"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding lfax, Source={StaticResource ResourceLanguage}}" MappingName="Fax"/>
            </Syncfusion:SfDataGrid.Columns>


        </Syncfusion:SfDataGrid>
    </DataTemplate>
    <DataTemplate x:Key="BranchGrid">
        <Syncfusion:SfDataGrid  x:Name="DelegationSummary"
                                                    ColumnSizer="AutoWithLastColumnFill"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="True"
                                                    AllowDeleting ="True"
                                                    AllowFiltering="True"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="False"
                                                    AllowGrouping="True"
                                                    NavigationMode="Cell"
                                                    AddNewRowPosition="Top"
                                                    CellStyle="{StaticResource KarveGridCell}"
                                                    AlternatingRowStyle="{StaticResource KarveAlternatingRowStyle}"
                                                    AlternationCount="2"
                                                    HeaderStyle ="{StaticResource BasicHeaderStyle}"
                                                    KarveControls:ControlExt.DataSourcePath="Delegation"
                                                    KarveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    KarveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.BranchesDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False">

            <i:Interaction.Behaviors>
                <gridbehavior:GridDefaultBehavior/>
            </i:Interaction.Behaviors>
            <Syncfusion:SfDataGrid.Resources>
                <ResourceDictionary>
                    <ResourceDictionary.MergedDictionaries>
                        <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                    </ResourceDictionary.MergedDictionaries>
                    <Style TargetType="Syncfusion:AddNewRowControl">
                        <Setter Property="FontSize" Value="12" />
                        <Setter Property="Foreground" Value="#FF808080" />
                        <Setter Property="BorderBrush" Value="#FF7fd0de" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Syncfusion:AddNewRowControl">
                                    <Grid>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="AddNewRowStates">
                                                <VisualState x:Name="Normal" />
                                                <VisualState x:Name="Edit">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="HasError">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="NoError">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Collapsed</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                            <VisualStateGroup x:Name="BorderStates">
                                                <VisualState x:Name="NormalRow" />
                                                <VisualState x:Name="FooterRow">
                                                    <Storyboard BeginTime="0">
                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="BorderThickness">
                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                        </ThicknessAnimationUsingKeyFrames>
                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="Margin">
                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                        </ThicknessAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                    Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                    Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                        <Border x:Name="PART_InValidBorder"
                                                                    Margin="0,0,1,1"
                                                                    Background="Transparent"
                                                                    BorderBrush="Red"
                                                                    BorderThickness="1"
                                                                    Visibility="Collapsed" />
                                        <Border x:Name="PART_AddNewRowBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                            <ContentPresenter />
                                        </Border>
                                        <Border x:Name="PART_AddNewRowTextBorder"
                                                                    Background="#FFE5E5E5"
                                                                    BorderBrush="Transparent"
                                                                    BorderThickness="0,0,1,1"
                                                                    Clip="{TemplateBinding TextBorderClip}"
                                                                    IsHitTestVisible="False">
                                            <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                  HorizontalAlignment="Left"
                                                                                  VerticalAlignment="Center"
                                                                                  Content="{TemplateBinding AddNewRowText}" />
                                        </Border>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ResourceDictionary>
            </Syncfusion:SfDataGrid.Resources>


            <Syncfusion:SfDataGrid.Columns>
                <Syncfusion:GridTextColumn HeaderText="{Binding ldelegacion, Source={StaticResource ResourceLanguage}}" MappingName="Branch"
                                                                   FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>

                <Syncfusion:GridTextColumn HeaderText="{Binding ldireccion, Source={StaticResource ResourceLanguage}}" MappingName="Address" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding ldireccion2, Source={StaticResource ResourceLanguage}}" MappingName="Address2" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding lcp, Source={StaticResource ResourceLanguage}}" MappingName="Zip" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding lpoblacion, Source={StaticResource ResourceLanguage}}" MappingName="City" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>

                <Syncfusion:GridTemplateColumn HeaderText="{Binding lprovincia, Source={StaticResource ResourceLanguage}}"
                                                           FilterPopupStyle="{StaticResource DelegationCodeStyle}"
                                                                       AllowResizing="False"
                                                                       AllowEditing="False"
                                                                       MappingName="ProvinceSource">
                    <Syncfusion:GridTemplateColumn.CellTemplate>


                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ProvinceSource.Code, Mode=TwoWay}"></TextBox>
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ProvinceSource.Name, Mode=TwoWay}"></TextBlock>
                                <Button Grid.Column="2" Width="30">
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.DelegationProvinceMagnifierCommand ,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                    </i:Interaction.Behaviors>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.CellTemplate>
                    <Syncfusion:GridTemplateColumn.EditTemplate>


                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ProvinceSource.Code}"></TextBox>
                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ProvinceSource.Name, Mode=TwoWay}"></TextBlock>
                                <Button Grid.Column="2" Width="30" >
                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                    <i:Interaction.Behaviors>
                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.DelegationProvinceMagnifierCommand ,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                    </i:Interaction.Behaviors>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </Syncfusion:GridTemplateColumn.EditTemplate>

                </Syncfusion:GridTemplateColumn>
                <Syncfusion:GridTextColumn HeaderText="{Binding ltelefono, Source={StaticResource ResourceLanguage}}" MappingName="Phone" FilterPopupStyle="{StaticResource DelegationCodeStyle}" />
                <Syncfusion:GridTextColumn HeaderText="{Binding ltelefono2, Source={StaticResource ResourceLanguage}}" MappingName="Phone2" FilterPopupStyle="{StaticResource DelegationCodeStyle}" />
                <Syncfusion:GridTextColumn HeaderText="{Binding lemail, Source={StaticResource ResourceLanguage}}" MappingName="Email" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                <Syncfusion:GridTextColumn HeaderText="{Binding lfax, Source={StaticResource ResourceLanguage}}" MappingName="Fax" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>

            </Syncfusion:SfDataGrid.Columns>

        </Syncfusion:SfDataGrid>
    </DataTemplate>


   
     
    <DataTemplate x:Key="DataFieldDataTemplate">
        <KarveControls:DataField LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                         TextContent="{Binding TextContent, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         TextContentWidth="{Binding TextContentWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                         LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                         IsReadOnly="{Binding IsReadOnly, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                         DataFieldHeight="{Binding Height, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                         DataSourcePath="{Binding DataField, Mode=OneWay,UpdateSourceTrigger=PropertyChanged}">

            <i:Interaction.Triggers>
                <i:EventTrigger EventName="DataFieldChanged">
                    <mvvm1:InvokeCommandAction Command="{Binding ChangedItem}" TriggerParameterPath="ChangedValuesObjects"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>

        </KarveControls:DataField>
    </DataTemplate>

    
    <DataTemplate x:Key="BillingInterval">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding lplazodepago, Source={StaticResource ResourceLanguage}}" Margin="10,0,0,10"></TextBlock>
            <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     DataSourcePath="PLAZO"
                                                     LabelVisible="False"
                                                     TextContentWidth="50"
                                                     Margin="0,5,0,0"
                                                     Height="25"
                                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>

            <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     DataSourcePath="PLAZO2"
                                                     LabelVisible="False"
                                                     TextContentWidth="50"
                                                     Height="25"
                                                     Margin="0,5,0,0"
                                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>
            <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     DataSourcePath="PLAZO2"
                                                     LabelVisible="False"
                                                         Margin="0,5,0,0"
                                                     TextContentWidth="50"
                                                     Height="25"
                                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>
            <TextBlock Text="{Binding ldiadepago, Source={StaticResource ResourceLanguage}}" Margin="5,0,0,5"></TextBlock>
            <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     DataSourcePath="DIA"
                                                         Margin="0,5,0,0"
                                                     LabelVisible="False"
                                                     TextContentWidth="50"
                                                     Height="25"
                                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>

            <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     DataSourcePath="DIA2"
                                                         Margin="0,5,0,0"
                                                     LabelVisible="False"
                                                     TextContentWidth="50"
                                                     Height="25"
                                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>


            <KarveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     DataSourcePath="DIA3"
                                                         Margin="0,5,0,0"
                                                     LabelVisible="False"
                                                     TextContentWidth="50"
                                                     Height="25"
                                                     ItemChangedCommand="{Binding ItemChangedCommand}">

            </KarveControls:DataField>
        </StackPanel>


    </DataTemplate>
    <!--
    <DataTemplate x:Key="DataFieldCheckBoxTemplate">
        <karveControls:DataFieldCheckBox
                    Content="{Binding Content, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    IsChecked="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    TextContentWidth="{Binding TextContentWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    DataField="{Binding DataField, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    ItemSource="{Binding ItemSource, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    TableName="{Binding TableName, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    DataFieldHeight="{Binding Height, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="DataFieldChanged">
                    <mvvm1:InvokeCommandAction Command="{Binding ChangedItem, }" TriggerParameterPath="ChangedValuesObjects"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>

        </karveControls:DataFieldCheckBox>
    </DataTemplate>
    -->
    <DataTemplate x:Key="DoubleDataFieldDataTemplate">
        <StackPanel Orientation="Horizontal">
            <KarveControls:DataField x:Name="FirstField" 
                                             LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             TextContent="{Binding TextContent, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             TextContentWidth="{Binding TextContentWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             IsReadOnly="{Binding IsReadOnly, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataFieldHeight="{Binding Height, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="{Binding DataField, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="DataFieldChanged">
                        <mvvm1:InvokeCommandAction Command="{Binding ChangedItem}" TriggerParameterPath="ChangedValuesObjects"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>

            </KarveControls:DataField>
            <KarveControls:DataField LabelText="{Binding LabelTextRight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             TextContent="{Binding TextContentRight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             TextContentWidth="{Binding TextContentWidthRight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelTextWidth="{Binding LabelTextWidthRight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelVisible="{Binding LabelVisibleRight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             IsReadOnly="{Binding IsReadOnlyRight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataFieldHeight="{Binding HeightRight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="{Binding DataFieldRight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="DataFieldChanged">
                        <mvvm1:InvokeCommandAction Command="{Binding ChangedItem}" TriggerParameterPath="ChangedValuesObjects"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </KarveControls:DataField>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="EmailDataTemplate">
        <StackPanel Orientation="Horizontal">
            <KarveControls:DataField x:Name="EmailField" 
                                             LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             TextContent="{Binding TextContent, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             TextContentWidth="{Binding TextContentWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataAllowed="{Binding DataAllowed, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             IsReadOnly="{Binding IsReadOnly, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataFieldHeight="{Binding Height, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             DataSourcePath="{Binding DataField, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            >

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="DataFieldChanged">
                        <mvvm1:InvokeCommandAction Command="{Binding ChangedItem}" TriggerParameterPath="ChangedValuesObjects"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>

            </KarveControls:DataField>
            <Button Command="{Binding EmailCommand}" CommandParameter="{Binding TextContent, ElementName=EmailField}">
                <Image Source="{Binding ButtonImage}" Height="20"/>
            </Button>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="DualFieldSearchTextBox">

        <KarveControls:DualFieldSearchBox LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataFieldFirst="{Binding DataFieldFirst, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataFieldSecond="{Binding DataFieldSecond, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  AssistDataFieldFirst="{Binding AssistDataFieldFirst, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  AssistDataFieldSecond="{Binding AssistDataFieldSecond, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataAllowedFirst="{Binding DataTypeFirst, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  DataAllowedSecond="{Binding DataTypeSecond, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentFirst="{Binding TextContentFirst, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentSecond="{Binding TextContentSecond, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  AssistTableName="{Binding AssistTableName, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  AssistQuery="{Binding AssistQuery, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentFirstWidth="{Binding TextContentFirstWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  TextContentSecondWidth="{Binding TextContentSecondWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  IsReadOnlyFirst="{Binding IsReadOnlyFirst, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  IsReadOnlySecond="{Binding IsReadOnlySecond, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  Visibility="{Binding IsVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  ButtonImage="{Binding ButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                  SourceView="{Binding SourceView, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  >

            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MagnifierPress">

                    <mvvm1:InvokeCommandAction Command="{Binding AssistCommand}" 
                                                       TriggerParameterPath="AssistParameters" />

                </i:EventTrigger>

                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                    <mvvm1:InvokeCommandAction Command="{Binding ChangedItem}" TriggerParameterPath="ChangedValuesObjects"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>

        </KarveControls:DualFieldSearchBox>
    </DataTemplate>
    <template:TemplateSelector x:Key="SimpleTemplateSelector"
                                       DataFieldTemplate="{StaticResource ResourceKey=DataFieldDataTemplate}"
                                       DualFieldSearchTemplate="{StaticResource ResourceKey=DualFieldSearchTextBox}"
                                       />

    <DataTemplate x:Key="MultipleDataFieldTemplate">
        <Grid ShowGridLines="False">
            <ItemsControl x:Name="Panel"  Grid.Row="0" ItemsSource="{Binding MultipleDataFields}" ItemTemplateSelector="{StaticResource ResourceKey=SimpleTemplateSelector}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal"/>
                    </ItemsPanelTemplate>

                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="GroupBoxMultipleObject">
        <GroupBox Header="{Binding GroupBoxTitle}" HorizontalAlignment="Left" Margin="10,10,0,0">
            <Grid ShowGridLines="False">
                <ItemsControl x:Name="Panel"  Grid.Row="0" ItemsSource="{Binding MultipleDataFields}" ItemTemplateSelector="{StaticResource ResourceKey=SimpleTemplateSelector}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </Grid>
        </GroupBox>
    </DataTemplate>

    <DataTemplate x:Key="DataFieldPickerTemplate">
        <KarveControls:DataDatePicker 
                    LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    PickerContentWidth="{Binding ContentWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    DataDatePickerHeight="{Binding Height, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    DateContent="{Binding Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    >
        </KarveControls:DataDatePicker>
    </DataTemplate>
    <DataTemplate x:Key="DataAreaTemplate">
        <KarveControls:DataArea DataSourcePath="{Binding DataField, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                        DataAreaTitle="{Binding DataAreaTitle, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                        DataSource="{Binding ItemSource, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
        </KarveControls:DataArea>
    </DataTemplate>
    <DataTemplate x:Key="ComboBoxTemplate">
        <KarveControls:DataCombox
                    Items="{Binding DataField, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    DataField="{Binding DataField, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    LabelVisible="{Binding LabelVisible, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    TableName="{Binding TableName, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    LabelText="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    LabelTextWidth="{Binding LabelTextWidth, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                    ItemSource="{Binding ItemSource, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
        </KarveControls:DataCombox>
    </DataTemplate>
    <template:TemplateSelector x:Key="BasicTemplateSelector"
                                       DataFieldTemplate="{StaticResource ResourceKey=DataFieldDataTemplate}"
                                       DoubleDataTemplate="{StaticResource ResourceKey=DoubleDataFieldDataTemplate}"
                                       DualFieldSearchTemplate="{StaticResource ResourceKey=DualFieldSearchTextBox}"
                                       MultipleDataFieldTemplate ="{StaticResource ResourceKey=MultipleDataFieldTemplate}"
                                       EmailDataTemplate="{StaticResource ResourceKey=EmailDataTemplate}"    
                                       PickerFieldTemplate="{StaticResource ResourceKey=DataFieldPickerTemplate}"
                                       GroupBoxTemplate="{StaticResource ResourceKey=GroupBoxMultipleObject}"
                                       DataAreaTemplate="{StaticResource ResourceKey=DataAreaTemplate}"
                                       DataComboxBoxTemplate="{StaticResource ResourceKey=ComboBoxTemplate}"
                                       >
    </template:TemplateSelector>

</ResourceDictionary>