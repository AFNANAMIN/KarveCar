<UserControl x:Class="MasterModule.Views.CommissionAgentInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mvvm1="http://prismlibrary.com/"
             mvvm1:ViewModelLocator.AutoWireViewModel="True"
             xmlns:local="clr-namespace:MasterModule.Views"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:karveControls="clr-namespace:KarveControls;assembly=KarveControls"
             xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:common="clr-namespace:MasterModule.Common"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
            >
    <UserControl.Resources>

        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Dragablz;component/themes/materialdesign.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MasterModule;component/Generic/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style TargetType="{x:Type dragablz:HeaderedDragablzItem}" x:Key="ItemStyle">
                <Setter Property="HeaderContent" Value="{Binding DataContext.Title}">

                </Setter>
            </Style>
            <Style TargetType="{x:Type dragablz:TabablzControl}" x:Key="TabablzControlStyle">
                <Setter Property="ShowDefaultCloseButton" Value="True" />

                <Setter Property="ItemContainerStyle" Value="{StaticResource TrapezoidDragableTabItemStyle}" />
                <Setter Property="HeaderMemberPath" Value="Header" />

                <Setter Property="Margin" Value="0 5 0 0" />
            </Style>
            
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Loaded">
                <mvvm1:InvokeCommandAction Command="{Binding ActiveSubsystemCommand, PresentationTraceSources.TraceLevel=High}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <StackPanel Orientation="Vertical">
        <local:UpperBarView Margin="100,10,0,0" DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            SourceView="{Binding SourceView, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MagnifierPress">

                    <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                               TriggerParameterPath="AssistParameters" />

                </i:EventTrigger>
                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                               TriggerParameterPath="ChangedValuesObjects"/>
                </i:EventTrigger>
                
                    <i:EventTrigger EventName="DataFieldChanged">
                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                    </i:EventTrigger>
                
                </i:Interaction.Triggers>
            </local:UpperBarView>

        <TabControl Name="MainTabControl" TabStripPlacement="Left" BorderThickness="0">
         <!--   <dragablz:TabablzControl.ItemContainerStyle>
                <Style TargetType="{x:Type dragablz:DragablzItem}" BasedOn="{StaticResource MaterialDesignDragableTabItemVerticalStyle}">
                  <Setter Property="Width" Value="100" />
                    <Setter Property="Height" Value="40" />
                    <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Background" Value="Blue"></Setter>
                    
                </Style>
            </dragablz:TabablzControl.ItemContainerStyle>
            <dragablz:TabablzControl.InterTabController>
                <dragablz:InterTabController />
            </dragablz:TabablzControl.InterTabController>
            -->
            <TabItem Name="General"  Header="General" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch">
                <ScrollViewer>
                    <Grid ShowGridLines="False">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <GroupBox Grid.Column="1">
                            <WrapPanel Orientation="Vertical">
                        <ItemsControl x:Name="leftPart" HorizontalAlignment="Stretch" 
                                      VerticalAlignment="Stretch" 
                                      ItemsSource="{Binding LeftValueCollection}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel Orientation="Vertical"
                                                            VirtualizingStackPanel.VirtualizationMode="Recycling" />

                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <karveControls:DualFieldSearchBox
                                             LabelText ="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelVisible="True"
                                             LabelTextWidth="100"
                                             DataFieldFirst="{Binding DataField}"
                                             AssistDataFieldFirst="{Binding AssistDataFieldFirst}" 
                                             AssistDataFieldSecond="{Binding AssistDataFieldSecond}"
                                             AssistTableName="{Binding AssistTableName}"
                                             AssistProperties="{Binding AssistProperties}"
                                             TextContentFirstWidth="100"
                                             TextContentSecondWidth="200"
                                             DataSource="{Binding DataSource, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             ButtonImage="{Binding ButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             SourceView="{Binding SourceView, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="MagnifierPress">

                                                    <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                               TriggerParameterPath="AssistParameters" />

                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ChangedItem, PresentationTraceSources.TraceLevel=High}" 
                                                                               TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                                
                                                
                                            </i:Interaction.Triggers>
                                        </karveControls:DualFieldSearchBox>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                           
                                    <!-- 
                                <karveControls:DataArea LabelText="Aviso">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DataArea>
                                -->
                            </WrapPanel>
                        </GroupBox>
                        
                        <VirtualizingStackPanel VirtualizingStackPanel.VirtualizationMode="Recycling" x:Name="CommisionRightPart"  Grid.Column="0" Orientation="Vertical">
                              
                            <karveControls:DataField LabelText="Nombre" LabelVisible="True" 
                                                       LabelTextWidth="100" 
                                                       DataSourcePath="nombre" 
                                                       DataObject="{Binding DataObject}" 
                                                       TextContentWidth="200">

                              <i:Interaction.Triggers>
                                  <i:EventTrigger EventName="DataFieldChanged">
                                      <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                  </i:EventTrigger>
                              </i:Interaction.Triggers>

                            </karveControls:DataField>

                            <karveControls:DataField LabelText="Direccion" LabelVisible="True" 
                                                     LabelTextWidth="100" 
                                                     DataSourcePath="direccion" 
                                                     DataObject="{Binding DataObject}" 
                                                     TextContentWidth="200">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DataField>

                                    <StackPanel Orientation="Horizontal">
                                        <karveControls:DualFieldSearchBox 
                                            x:Name="CitySearchBox"
                                            DataFieldFirst="{Binding Path=City, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            AssistTableName="POBLACIONES"
                                            AssistDataFieldFirst="CP"
                                            AssistDataFieldSecond="POBLA"
                                            AssistProperties="Codigo,Poblacion"
                                            LabelVisible="False"
                                            LabelText="Poblacion"
                                            Margin="0,5,0,0"
                                            LabelTextWidth="100"
                                            ItemChangedCommand="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}"
                                            MagnifierCommand="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}"
                                            IsReadOnlySecond="True"
                                            TextContentFirstWidth="100"
                                            TextContentSecondWidth="200"
                                            ButtonImage="{x:Static common:MasterModuleConstants.ImagePath}"
                                            SourceView="{Binding PoblacionDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            DataSource="{Binding  DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                            <i:Interaction.Triggers>

                                                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                               TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>

                                        </karveControls:DualFieldSearchBox>
                            </StackPanel>
                            <karveControls:DualFieldSearchBox LabelText="Provincia" 
                                                                  LabelTextWidth="100" 
                                                                  TextContentFirstWidth="50"
                                                                  TextContentSecondWidth="200"
                                                                  DataFieldFirst="provincia" 
                                                                  AssistDataFieldFirst="siglas"
                                                                  AssistDataFieldSecond="prov" 
                                                                  AssistTableName="PROVINCIA"
                                                                  AssistProperties="Code,Name"
                                                                  DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                  SourceView="{Binding Province, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, PresentationTraceSources.TraceLevel=High}"
                                                                  ButtonImage="{Binding MagnifierButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="MagnifierPress">

                                            <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="AssistParameters" />

                                        </i:EventTrigger>

                                        <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DualFieldSearchBox>
                              <karveControls:DualFieldSearchBox LabelText="Pais" 
                                                                LabelTextWidth="100" 
                                                                DataFieldFirst="nacioper" 
                                                                AssistDataFieldFirst="siglas"
                                                                AssistDataFieldSecond="pais" 
                                                                AssistTableName="PAIS"
                                                                AssistProperties="Code,CountryName"
                                                                TextContentFirstWidth="50"
                                                                TextContentSecondWidth="200"
                                                                DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                SourceView="{Binding Country, UpdateSourceTrigger=PropertyChanged}"
                                                                ButtonImage="{Binding MagnifierButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                  <i:Interaction.Triggers>
                                      <i:EventTrigger EventName="MagnifierPress">

                                          <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                     TriggerParameterPath="AssistParameters" />

                                      </i:EventTrigger>

                                      <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                          <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                      </i:EventTrigger>
                                  </i:Interaction.Triggers>
                              </karveControls:DualFieldSearchBox>
                              <StackPanel>
                              <karveControls:DataField LabelText="Telefono" LabelVisible="True" 
                                                       DataSourcePath="telefono" 
                                                       LabelTextWidth="100" 
                                                       TextContentWidth="200" 
                                                       DataObject="{Binding DataObject}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DataField>
                                  <karveControls:DataField LabelText="Fax" 
                                                           LabelVisible="True" 
                                                           DataSourcePath="fax"
                                                           LabelTextWidth="100" 
                                                           TextContentWidth="200"
                                                           DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                      <i:Interaction.Triggers>
                                          <i:EventTrigger EventName="DataFieldChanged">
                                              <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                          </i:EventTrigger>
                                      </i:Interaction.Triggers>
                                  </karveControls:DataField>
                                
                                </StackPanel>


                                <karveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                     LabelTextWidth="100" 
                                                     TextContentWidth="200" 
                                                     LabelText="Movil" 
                                                     DataSourcePath="Movil"
                                                     TableName="{Binding TableName}"
                                                     />
                            
                            <WrapPanel Orientation="Horizontal">
                                <karveControls:DataDatePicker LabelText="Fecha alta"
                                                              DataDatePickerHeight="30" 
                                                              LabelTextWidth="100" 
                                                              LabelVisible="True"
                                                              PickerContentWidth="100"
                                                              karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              karveControls:ControlExt.DataSourcePath="Value.alta_comi"
                                                              >

                                    <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataDatePickerChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DataDatePicker>
                                <karveControls:DataDatePicker LabelText="Fecha baja"
                                                              LabelVisible="True"
                                                              LabelTextWidth="100" 
                                                              PickerContentWidth="100" 
                                                              DataDatePickerHeight="30"
                                                              karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                              karveControls:ControlExt.DataSourcePath="Value.baja_comi">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DataDatePicker>
                            </WrapPanel>
                            <karveControls:DualFieldSearchBox 
                                LabelText="Idioma" 
                                LabelTextWidth="100"
                                LabelVisible="True"
                                DataFieldFirst="idioma" 
                                AssistDataFieldFirst="codigo"
                                AssistDataFieldSecond="nombre" 
                                AssistTableName="IDIOMAS"
                                AssistProperties="Numero,Nombre"
                                TextContentFirstWidth="50"
                                TextContentSecondWidth="100"
                                ItemChangedCommand="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}"
                                MagnifierCommand="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}"
                                DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                SourceView="{Binding Language,UpdateSourceTrigger=PropertyChanged}"
                                ButtonImage="{Binding MagnifierButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                            </karveControls:DualFieldSearchBox>
                            <karveControls:DataField
                                LabelText="N.IATA"
                                LabelTextWidth="100"
                                TableName="{Binding TableName}"
                                DataSourcePath="IATA" 
                                TextContentWidth="100"
                                DataObject="{Binding DataObject}">

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="DataFieldChanged">
                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>

                            </karveControls:DataField>
                            <GroupBox Header="Opciones">
                                    <WrapPanel Orientation="Vertical">
                                        <karveControls:DataFieldCheckBox Content="IVA en Listado" 
                                                  karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  karveControls:ControlExt.DataSourcePath="Value.IVASINO">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Retencion en Listado" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.RETENSINO">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Es Nacional" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.NACIONAL">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Si es cliente es agencia" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.CONCEPTOS_COND">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Es agencia de viaje"  
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.AGENCIA">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Traduce conceptos web"  
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.TRADUCE_WS">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                <karveControls:DataFieldCheckBox Content="Track rental broker" 
                                                                 karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                 karveControls:ControlExt.DataSourcePath="Value.TRUCK_RENTAL_BROKER">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                <karveControls:DataFieldCheckBox Content="Combustible Prepago Obligatorio + de 5 Días de Alquiler"
                                                                 karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                 karveControls:ControlExt.DataSourcePath="Value.COMBUS_PREPAGO_COMI">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="No generar Autofacturas" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.NO_GENERAR_AUTOFAC">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Cotizar Todos los Extras" 
                                                                         Visibility="Visible"
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.TODOS_EXTRAS">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                    
                                        <karveControls:DataFieldCheckBox Content="Oneway automatico" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.AUTO_ONEWAY">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Mostrar Sólo Incluidos al Cotizar Todos los Grupos" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.COT_INCLUIDOS_SIN_GRUPO">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                    
                                        <karveControls:DataFieldCheckBox Content="No Enviar Reservas" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.NO_MAIL_RES">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Autofactura sin IVA" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.AUTOFAC_SIN_IVA">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                                        <karveControls:DataFieldCheckBox Content="Comisión Sin IVA" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.COMISION_SIN_IVA_COM">

                                    <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    </karveControls:DataFieldCheckBox>
                            </WrapPanel>
                            </GroupBox>

                        </VirtualizingStackPanel>
                    </Grid>
                </Grid>
                </ScrollViewer>

            </TabItem>
            
            <TabItem Name="Comisiones" Header="Commisiones">
                <ScrollViewer>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="1">
                                            <GroupBox>
                            <WrapPanel Orientation="Vertical">
                                
                                <karveControls:DualFieldSearchBox 
                            Name="TipoComision"
                            SourceView="{Binding TipoComission, UpdateSourceTrigger=PropertyChanged}" 
                            DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            LabelText="Tipo Comisión"
                            LabelTextWidth="200"
                            TextContentFirstWidth="70"
                            TextContentSecondWidth="200"
                            AssistTableName="TIPOCOMISION" 
                            AssistDataFieldFirst="NUM_SOBREQ"
                            AssistDataFieldSecond="NOMBRE"
                            AssistProperties="Codigo,Nombre"        
                            TableName="{Binding TableName}" 
                            DataFieldFirst="SOBREQUE"
                            ButtonImage="{Binding MagnifierButtonImage}"
                            MagnifierCommand="{Binding MagnifierCommand}"
                            ItemChangedCommand="{Binding ItemChangedCommand}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MagnifierPress">

                                    <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                                               TriggerParameterPath="AssistParameters" />

                                </i:EventTrigger>
                                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                                               TriggerParameterPath="ChangedValuesObjects"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                       </karveControls:DualFieldSearchBox>
                                <StackPanel Orientation="Horizontal">
                                    <karveControls:DataField
                                        LabelText="Porcentaje:"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="200"
                                        DataSourcePath="PORCEN"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataFieldChanged">
                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                    </karveControls:DataField>
                                    <karveControls:DataField
                                        LabelText="%LO"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="50"
                                        DataSourcePath="PORCENLO"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataFieldChanged">
                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                    </karveControls:DataField>
                                    <karveControls:DataField
                                        LabelText="%CL"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="50"
                                        DataSourcePath="PORCENCL"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataFieldChanged">
                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                    </karveControls:DataField>
                                    <karveControls:DataField
                                        LabelText="%Sub."
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="50"
                                        DataSourcePath="POR_SUBCONTRA"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataFieldChanged">
                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                    </karveControls:DataField>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <karveControls:DataField
                                        LabelText="Importe Comisión"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="200"
                                        DataSourcePath="IMP_COMI"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataFieldChanged">
                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                    </karveControls:DataField>
                                    <karveControls:DataField
                                        LabelText="% Subcontractados"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="200"
                                        DataSourcePath="IMP_COMI"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DataFieldChanged">
                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                    </karveControls:DataField>
                                </StackPanel>
                                <karveControls:DataField
                                    LabelText="Referencia Cliente"
                                    LabelVisible="True"
                                    DataObject="{Binding DataObject,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    LabelTextWidth="200" 
                                    TextContentWidth="200"
                                    DataSourcePath="REF_A_CLI"
                                    ItemChangedCommand="{Binding ItemChangedCommand}">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="DataFieldChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                </karveControls:DataField>
                                <karveControls:DualFieldSearchBox 
                                    LabelText="Cliente"
                                    LabelVisible="True"
                                    SourceView="{Binding ClientOne, UpdateSourceTrigger=PropertyChanged}" 
                                    DataSource="{Binding DataObject,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    LabelTextWidth="200" 
                                    TextContentFirstWidth="70"
                                    TextContentSecondWidth="100"
                                    TableName="{Binding TableName}"
                                    DataFieldFirst="CLIENTE"
                                    AssistTableName="CLIENTES1"
                                    AssistDataFieldFirst="NUMERO_CLI"
                                    AssistDataFieldSecond="NOMBRE"
                                    AssistProperties="Numero,Nombre"
                                    ButtonImage="{Binding MagnifierButtonImage}"
                                    MagnifierCommand="{Binding MagnifierCommand}"
                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="MagnifierPress">

                                            <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="AssistParameters" />

                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DualFieldSearchBox>

                                <karveControls:DualFieldSearchBox 
                                    LabelText="Producto Comi."
                                    LabelTextWidth="200"
                                    LabelVisible="True"
                                    SourceView="{Binding Products}" 
                                    DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    TextContentFirstWidth="70"
                                    TextContentSecondWidth="200"
                                    TableName="{Binding TableName}"
                                    DataFieldFirst="PRODUCT_COMI"
                                    AssistTableName="PRODUCTS"
                                    AssistDataFieldFirst="CODIGO_PRD"
                                    AssistDataFieldSecond="NOMBRE_PRD"
                                    AssistProperties="Codigo,Nombre"
                                    ButtonImage="{Binding MagnifierButtonImage}"
                                    MagnifierCommand="{Binding MagnifierCommand}"
                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="MagnifierPress">

                                            <mvvm1:InvokeCommandAction Command="{Binding AssistCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="AssistParameters" />
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="ChangedValuesObjects"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </karveControls:DualFieldSearchBox>
                        
                        <GroupBox Header="Commercio Associados">
                                    <WrapPanel>
                                        <VirtualizingStackPanel  VirtualizingStackPanel.VirtualizationMode="Recycling" x:Name="WrapPanelAssociated" Orientation="Vertical">
                                            <karveControls:DataField 
                                                LabelText="Nombre" 
                                                LabelVisible="True"
                                                LabelTextWidth="100"
                                                TextContentWidth="200"
                                                ItemChangedCommand="{Binding ItemChangedCommand}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </karveControls:DataField>
                                            <karveControls:DataField 
                                                LabelText="NIF" 
                                                LabelVisible="True"
                                                LabelTextWidth="100"
                                                TextContentWidth="200"
                                                ItemChangedCommand="{Binding ItemChangedCommand}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </karveControls:DataField>
                                            <karveControls:DataField 
                                                LabelText="Direccion" 
                                                LabelVisible="True"
                                                LabelTextWidth="100"
                                                TextContentWidth="200"
                                                DataObject="{Binding DataObject}"
                                                ItemChangedCommand="{Binding ItemChangedCommand}">
                                               
                                                    <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </karveControls:DataField>
                                            <StackPanel Orientation="Horizontal">
                                                <karveControls:DataField
                                                    LabelText="CP" 
                                                    LabelVisible="True"
                                                    LabelTextWidth="100"
                                                    TextContentWidth="200"
                                                    DataObject="{Binding DataObject}"
                                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="DataFieldChanged">
                                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </karveControls:DataField>
                                                <karveControls:DataField
                                                    LabelText="Poblacion" 
                                                    LabelVisible="True"
                                                    LabelTextWidth="100"
                                                    TextContentWidth="200"
                                                    DataObject="{Binding DataObject}"
                                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="DataFieldChanged">
                                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </karveControls:DataField>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <karveControls:DataField
                                                    LabelText="Telefono" 
                                                    LabelVisible="True"
                                                    LabelTextWidth="100"
                                                    TextContentWidth="200"
                                                    DataObject="{Binding DataObject}"
                                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="DataFieldChanged">
                                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </karveControls:DataField>
                                                <karveControls:DataField
                                                    LabelText="Fax" 
                                                    LabelVisible="True"
                                                    LabelTextWidth="100"
                                                    TextContentWidth="200"
                                                    DataObject="{Binding DataObject}"
                                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="DataFieldChanged">
                                                            <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </karveControls:DataField>
                                            </StackPanel>
                                            <karveControls:DataField LabelText="Tel.Movil"
                                                                     LabelVisible="True"
                                                                     LabelTextWidth="100" 
                                                                     TextContentWidth="200"
                                                                     DataObject="{Binding DataObject}"
                                                                     ItemChangedCommand="{Binding ItemChangedCommand}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataField>
                                            <ContentControl>
                                                <StackPanel Orientation="Horizontal">
                                                    <karveControls:DataField x:Name="EmailFieldComisio" 
                                                                             LabelText="Email"
                                                                             TextContentWidth="200"
                                                                             LabelTextWidth="100"
                                                                             LabelVisible="True"
                                                                             DataAllowed="Email"
                                                                             IsReadOnly="False"
                                                                             DataFieldHeight="40"
                                                                             DataSourcePath="EMAIL"
                                                                             DataObject="{Binding DataObject}"
                                                                             >
                                                        
                                                        <i:Interaction.Triggers>
                                                            <i:EventTrigger EventName="DataFieldChanged">
                                                                <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                            </i:EventTrigger>
                                                        </i:Interaction.Triggers>
                                                    </karveControls:DataField>
                                                    <Button Command="{Binding EmailCommand}" CommandParameter="{Binding TextContent, ElementName=EmailField}">
                                                        <Image Source="{Binding EmailButtonImage}" Height="20"/>
                                                    </Button>
                                                </StackPanel>
                                            </ContentControl>
                                           
                                            <karveControls:DataField LabelText="Codigo" 
                                                                     LabelTextWidth="100" 
                                                                     LabelVisible="True"
                                                                     TextContentWidth="200"
                                                                     DataObject="{Binding DataObject}"
                                                                     ItemChangedCommand="{Binding ItemChangedCommand}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </karveControls:DataField>
                                            <Button Content="Imprimir" Command="{Binding PrintAssociate}"></Button>
                                        </VirtualizingStackPanel>
                                    </WrapPanel>
                                </GroupBox>
                            </WrapPanel>
                       </GroupBox>
                </Grid>
                    </Grid>
                    </ScrollViewer>
            </TabItem>
            
                <TabItem Header="Delegaciones">
                <ScrollViewer>
                <Grid>
                    <Grid.Resources>
                        <ResourceDictionary>
                            <ObjectDataProvider x:Key="FilterMode"
                                                MethodName="GetValues"
                                                ObjectType="{x:Type system:Enum}">
                                <ObjectDataProvider.MethodParameters>
                                    <x:Type TypeName="syncfusion:FilterMode" />
                                </ObjectDataProvider.MethodParameters>
                            </ObjectDataProvider>

                            <Style x:Key="DelegationCodeStyle" TargetType="syncfusion:GridFilterControl">
                                <Setter Property="FilterMode" Value="Both" />
                            </Style>
                        </ResourceDictionary>
                    </Grid.Resources>
                    <StackPanel Orientation="Vertical">

                                <syncfusion:SfDataGrid  x:Name="DelegationSummary"
                                               ColumnSizer="Star"
                                               AllowDraggingColumns="True"
                                               AllowEditing="True"
                                               AllowFiltering="True"
                                               AllowResizingColumns="True"
                                               AllowSorting="True"
                                               AllowGrouping="True"
                                               NavigationMode="Row"
                                               AddNewRowPosition="Top"
                                               karveControls:ControlExt.DataSource="{Binding DataObject.DelegationDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                               karveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                               ItemsSource="{Binding DataObject.DelegationDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                               AutoGenerateColumns="False"
                        >


                            <syncfusion:SfDataGrid.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                                    </ResourceDictionary.MergedDictionaries>
                                    <Style TargetType="syncfusion:AddNewRowControl">
                                        <Setter Property="FontSize" Value="12" />
                                        <Setter Property="Foreground" Value="#FF808080" />
                                        <Setter Property="BorderBrush" Value="#FF7fd0de" />
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="syncfusion:AddNewRowControl">
                                                    <Grid>
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="AddNewRowStates">
                                                                <VisualState x:Name="Normal" />
                                                                <VisualState x:Name="Edit">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="HasError">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="NoError">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                            <VisualStateGroup x:Name="BorderStates">
                                                                <VisualState x:Name="NormalRow" />
                                                                <VisualState x:Name="FooterRow">
                                                                    <Storyboard BeginTime="0">
                                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                          Duration="1"
                                                                                                          Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                          Storyboard.TargetProperty="BorderThickness">
                                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                                        </ThicknessAnimationUsingKeyFrames>
                                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                          Duration="1"
                                                                                                          Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                          Storyboard.TargetProperty="Margin">
                                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                                        </ThicknessAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                        <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                                        <Border x:Name="PART_InValidBorder"
                                                                Margin="0,0,1,1"
                                                                Background="Transparent"
                                                                BorderBrush="Red"
                                                                BorderThickness="1"
                                                                Visibility="Collapsed" />
                                                        <Border x:Name="PART_AddNewRowBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}">
                                                            <ContentPresenter />
                                                        </Border>
                                                        <Border x:Name="PART_AddNewRowTextBorder"
                                                                Background="#FFE5E5E5"
                                                                BorderBrush="Transparent"
                                                                BorderThickness="0,0,1,1"
                                                                Clip="{TemplateBinding TextBorderClip}"
                                                                IsHitTestVisible="False">
                                                            <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                              HorizontalAlignment="Left"
                                                                              VerticalAlignment="Center"
                                                                              Content="{TemplateBinding AddNewRowText}" />
                                                        </Border>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ResourceDictionary>
                            </syncfusion:SfDataGrid.Resources>


                            <syncfusion:SfDataGrid.Columns>
                                <!-- 
                                
                                AllowBlankFilters="{Binding Source={x:Reference ckbAllowBlankFiltersOrderID},
                                                                               Mode=TwoWay,
                                                                               Path=IsChecked}"
                                                   AllowFiltering="{Binding Source={x:Reference ckbAllowFilterOrderID},
                                                                            Mode=TwoWay,
                                                                            Path=IsChecked}"
                                                   FilterPopupStyle="{StaticResource popupstyleforOrderID}"
                                                   ImmediateUpdateColumnFilter="{Binding Path=IsChecked,
                                                                                         Mode=TwoWay,
                                                   Source={x:Reference ckbImmediateUpdateColumnFilterOrderID}}"
                                                   MappingName="OrderID"
                                -->
                               
                                        <syncfusion:GridTextColumn HeaderText="Codigo" 
                                                           MappingName="BranchId" 
                                                           TextAlignment="Left"
                                                           AllowFiltering="True"
                                                   
                                                           FilterPopupStyle="{StaticResource DelegationCodeStyle}"
                                                           AllowEditing="True"
                                                           AllowGrouping="True"/>
                                <syncfusion:GridTemplateColumn HeaderText="Delegacion" MappingName="Branch"
                                                               FilterPopupStyle="{StaticResource DelegationCodeStyle}">
                                    <syncfusion:GridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock FontStyle="Italic"
                                                       FontWeight="SemiBold"
                                                       Padding="2,0"
                                                       Text="{Binding Branch}" />
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.CellTemplate>
                                    <syncfusion:GridTemplateColumn.EditTemplate>
                                        <DataTemplate>
                                            <Grid HorizontalAlignment="Stretch"
                                                  VerticalAlignment="Stretch"
                                                  FocusManager.FocusedElement="{Binding ElementName=textBox}">
                                                <TextBox x:Name="textBox"
                                                         FontStyle="Italic"
                                                         FontWeight="SemiBold"
                                                         Padding="2,0"
                                                         Text="{Binding Branch,
                                                                Mode=TwoWay}" />
                                            </Grid>
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.EditTemplate>
                                </syncfusion:GridTemplateColumn>
                                <syncfusion:GridDateTimeColumn HeaderText="Dirección" MappingName="Address"/>
                                <syncfusion:GridDateTimeColumn HeaderText="Dirección 2" MappingName="Address2"/>
                                <syncfusion:GridDateTimeColumn HeaderText="Telefono " MappingName="Phone"/>
                                <syncfusion:GridDateTimeColumn HeaderText="Telefono 2" MappingName="Phone2"/>
                                <syncfusion:GridTextColumn HeaderText="Email" MappingName="Email"/>
                                <syncfusion:GridDateTimeColumn HeaderText="Provincia" MappingName="Provincia.Name"/>
                                        <syncfusion:GridTextColumn HeaderText="Pais" MappingName="Provincia.Pais"/>
                                    </syncfusion:SfDataGrid.Columns>
                            <!--
                            <i:Interaction.Behaviors>
                                <common:MaintenanceValidationBehavior />
                            </i:Interaction.Behaviors>
                            -->
                        </syncfusion:SfDataGrid>
                        </StackPanel>
                                <!--
                            <karveGrid:KarveGridView Grid.Row="1"
                                             x:Name="DelegationSummary" PageSize="25" Grid.IsSharedSizeScope="True"
                                             MinHeight="400"  ReadOnly="False" ColumnWidth="100" S
                    ourceView="{Binding DataObject.DelegationDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="ChangedRows">
                                        <mvvm1:InvokeCommandAction Command="{Binding DelegationChangedRowsCommand, PresentationTraceSources.TraceLevel=High}" 
                                                               TriggerParameterPath="RowParameters" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </karveGrid:KarveGridView>
                                             
                        -->        
                </Grid>
                    </ScrollViewer>
            </TabItem>
            <TabItem Header="Contactos">
                <ScrollViewer>
                    <Grid>
                        <Grid.Resources>
                            <ResourceDictionary>
                                <ObjectDataProvider x:Key="FilterMode"
                                                    MethodName="GetValues"
                                                    ObjectType="{x:Type system:Enum}">
                                    <ObjectDataProvider.MethodParameters>
                                        <x:Type TypeName="syncfusion:FilterMode" />
                                    </ObjectDataProvider.MethodParameters>
                                </ObjectDataProvider>

                                <Style x:Key="ContactCodeStyle" TargetType="syncfusion:GridFilterControl">
                                    <Setter Property="FilterMode" Value="Both" />
                                </Style>
                            </ResourceDictionary>
                        </Grid.Resources>
                        <StackPanel Orientation="Vertical">

                            <syncfusion:SfDataGrid  x:Name="ContactsSummary"
                                                    ColumnSizer="Star"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="False"
                                                    AllowFiltering="True"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="True"
                                                    AllowGrouping="True"
                                                    NavigationMode="Row"
                                                    AddNewRowPosition="Top"
                                                    karveControls:ControlExt.DataSource="{Binding DataObject.ContactsDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    karveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.ContactsDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False"
                            >


                                <syncfusion:SfDataGrid.Resources>
                                    <ResourceDictionary>
                                        <ResourceDictionary.MergedDictionaries>
                                            <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                                        </ResourceDictionary.MergedDictionaries>
                                        <Style TargetType="syncfusion:AddNewRowControl">
                                            <Setter Property="FontSize" Value="12" />
                                            <Setter Property="Foreground" Value="#FF808080" />
                                            <Setter Property="BorderBrush" Value="#FF7fd0de" />
                                            <Setter Property="BorderThickness" Value="0" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="syncfusion:AddNewRowControl">
                                                        <Grid>
                                                            <VisualStateManager.VisualStateGroups>
                                                                <VisualStateGroup x:Name="AddNewRowStates">
                                                                    <VisualState x:Name="Normal" />
                                                                    <VisualState x:Name="Edit">
                                                                        <Storyboard>
                                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                                                    <DiscreteObjectKeyFrame.Value>
                                                                                        <Visibility>Collapsed</Visibility>
                                                                                    </DiscreteObjectKeyFrame.Value>
                                                                                </DiscreteObjectKeyFrame>
                                                                            </ObjectAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </VisualState>
                                                                    <VisualState x:Name="HasError">
                                                                        <Storyboard>
                                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                                            </ObjectAnimationUsingKeyFrames>
                                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                                                    <DiscreteObjectKeyFrame.Value>
                                                                                        <Visibility>Collapsed</Visibility>
                                                                                    </DiscreteObjectKeyFrame.Value>
                                                                                </DiscreteObjectKeyFrame>
                                                                            </ObjectAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </VisualState>
                                                                    <VisualState x:Name="NoError">
                                                                        <Storyboard>
                                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                                                    <DiscreteObjectKeyFrame.Value>
                                                                                        <Visibility>Collapsed</Visibility>
                                                                                    </DiscreteObjectKeyFrame.Value>
                                                                                </DiscreteObjectKeyFrame>
                                                                            </ObjectAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </VisualState>
                                                                </VisualStateGroup>
                                                                <VisualStateGroup x:Name="BorderStates">
                                                                    <VisualState x:Name="NormalRow" />
                                                                    <VisualState x:Name="FooterRow">
                                                                        <Storyboard BeginTime="0">
                                                                            <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="BorderThickness">
                                                                                <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                                            </ThicknessAnimationUsingKeyFrames>
                                                                            <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="Margin">
                                                                                <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                                            </ThicknessAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </VisualState>
                                                                </VisualStateGroup>
                                                            </VisualStateManager.VisualStateGroups>
                                                            <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                    Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                    Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                                            <Border x:Name="PART_InValidBorder"
                                                                    Margin="0,0,1,1"
                                                                    Background="Transparent"
                                                                    BorderBrush="Red"
                                                                    BorderThickness="1"
                                                                    Visibility="Collapsed" />
                                                            <Border x:Name="PART_AddNewRowBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                <ContentPresenter />
                                                            </Border>
                                                            <Border x:Name="PART_AddNewRowTextBorder"
                                                                    Background="#FFE5E5E5"
                                                                    BorderBrush="Transparent"
                                                                    BorderThickness="0,0,1,1"
                                                                    Clip="{TemplateBinding TextBorderClip}"
                                                                    IsHitTestVisible="False">
                                                                <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                  HorizontalAlignment="Left"
                                                                                  VerticalAlignment="Center"
                                                                                  Content="{TemplateBinding AddNewRowText}" />
                                                            </Border>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ResourceDictionary>
                                </syncfusion:SfDataGrid.Resources>


                                <syncfusion:SfDataGrid.Columns>
                                    <!-- 
                                
                                AllowBlankFilters="{Binding Source={x:Reference ckbAllowBlankFiltersOrderID},
                                                                               Mode=TwoWay,
                                                                               Path=IsChecked}"
                                                   AllowFiltering="{Binding Source={x:Reference ckbAllowFilterOrderID},
                                                                            Mode=TwoWay,
                                                                            Path=IsChecked}"
                                                   FilterPopupStyle="{StaticResource popupstyleforOrderID}"
                                                   ImmediateUpdateColumnFilter="{Binding Path=IsChecked,
                                                                                         Mode=TwoWay,
                                                   Source={x:Reference ckbImmediateUpdateColumnFilterOrderID}}"
                                                   MappingName="OrderID"
                                -->

                                  
                                        <syncfusion:GridTemplateColumn HeaderText="Nombre" MappingName="ContactName"
                                                                   FilterPopupStyle="{StaticResource ContactCodeStyle}">
                                        <syncfusion:GridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock FontStyle="Italic"
                                                           FontWeight="SemiBold"
                                                           Padding="2,0"
                                                           Text="{Binding ContactName}" />
                                            </DataTemplate>
                                        </syncfusion:GridTemplateColumn.CellTemplate>
                                        <syncfusion:GridTemplateColumn.EditTemplate>
                                            <DataTemplate>
                                                <Grid HorizontalAlignment="Stretch"
                                                      VerticalAlignment="Stretch"
                                                      FocusManager.FocusedElement="{Binding ElementName=textBox}">
                                                    <TextBox x:Name="textBox"
                                                             FontStyle="Italic"
                                                             FontWeight="SemiBold"
                                                             Padding="2,0"
                                                             Text="{Binding ContactName,
                                                                Mode=TwoWay}" />
                                                </Grid>
                                            </DataTemplate>
                                        </syncfusion:GridTemplateColumn.EditTemplate>
                                    </syncfusion:GridTemplateColumn>
                                    <syncfusion:GridDateTimeColumn HeaderText="NIF" MappingName="Nif"/>
                                    <syncfusion:GridDateTimeColumn HeaderText="Cargo" MappingName="Responsability"/>
                                    <syncfusion:GridDateTimeColumn HeaderText="Telefono" MappingName="Telefono"/>
                                    <syncfusion:GridDateTimeColumn HeaderText="Movil" MappingName="Movil"/>
                                    <syncfusion:GridTextColumn HeaderText="Email" MappingName="Email"/>
                                    <syncfusion:GridDateTimeColumn HeaderText="Fax" MappingName="Fax"/>
                                    </syncfusion:SfDataGrid.Columns>
                                <!--
                            <i:Interaction.Behaviors>
                                <common:MaintenanceValidationBehavior />
                            </i:Interaction.Behaviors>
                            -->
                            </syncfusion:SfDataGrid>
                        </StackPanel>
                        <!--
                            <karveGrid:KarveGridView Grid.Row="1"
                                             x:Name="DelegationSummary" PageSize="25" Grid.IsSharedSizeScope="True"
                                             MinHeight="400"  ReadOnly="False" ColumnWidth="100" S
                    ourceView="{Binding DataObject.DelegationDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="ChangedRows">
                                        <mvvm1:InvokeCommandAction Command="{Binding DelegationChangedRowsCommand, PresentationTraceSources.TraceLevel=High}" 
                                                               TriggerParameterPath="RowParameters" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </karveGrid:KarveGridView>
                                             
                        -->
                    </Grid>
                     
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Visitas">
                <ScrollViewer>
                <Grid>
                    <Grid.Resources>
                        <ResourceDictionary>
                            <ObjectDataProvider x:Key="FilterMode"
                                                MethodName="GetValues"
                                                ObjectType="{x:Type system:Enum}">
                                <ObjectDataProvider.MethodParameters>
                                    <x:Type TypeName="syncfusion:FilterMode" />
                                </ObjectDataProvider.MethodParameters>
                            </ObjectDataProvider>

                            <Style x:Key="ContactCodeStyle" TargetType="syncfusion:GridFilterControl">
                                <Setter Property="FilterMode" Value="Both" />
                            </Style>
                        </ResourceDictionary>
                    </Grid.Resources>
                    <StackPanel Orientation="Vertical">

                        <syncfusion:SfDataGrid  x:Name="VisitsSummary"
                                                ColumnSizer="Star"
                                                AllowDraggingColumns="True"
                                                AllowEditing="False"
                                                AllowFiltering="True"
                                                AllowResizingColumns="True"
                                                AllowSorting="True"
                                                AllowGrouping="True"
                                                NavigationMode="Row"
                                                AddNewRowPosition="Top"
                                                karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, 
                                                UpdateSourceTrigger=PropertyChanged}"
                                                karveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                ItemsSource="{Binding DataObject.VisitsDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                AutoGenerateColumns="False"
                        >


                            <syncfusion:SfDataGrid.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                                    </ResourceDictionary.MergedDictionaries>
                                    <Style TargetType="syncfusion:AddNewRowControl">
                                        <Setter Property="FontSize" Value="12" />
                                        <Setter Property="Foreground" Value="#FF808080" />
                                        <Setter Property="BorderBrush" Value="#FF7fd0de" />
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="syncfusion:AddNewRowControl">
                                                    <Grid>
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="AddNewRowStates">
                                                                <VisualState x:Name="Normal" />
                                                                <VisualState x:Name="Edit">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="HasError">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="NoError">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                            <VisualStateGroup x:Name="BorderStates">
                                                                <VisualState x:Name="NormalRow" />
                                                                <VisualState x:Name="FooterRow">
                                                                    <Storyboard BeginTime="0">
                                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                          Duration="1"
                                                                                                          Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                          Storyboard.TargetProperty="BorderThickness">
                                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                                        </ThicknessAnimationUsingKeyFrames>
                                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                          Duration="1"
                                                                                                          Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                          Storyboard.TargetProperty="Margin">
                                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                                        </ThicknessAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                        <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                                        <Border x:Name="PART_InValidBorder"
                                                                Margin="0,0,1,1"
                                                                Background="Transparent"
                                                                BorderBrush="Red"
                                                                BorderThickness="1"
                                                                Visibility="Collapsed" />
                                                        <Border x:Name="PART_AddNewRowBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}">
                                                            <ContentPresenter />
                                                        </Border>
                                                        <Border x:Name="PART_AddNewRowTextBorder"
                                                                Background="#FFE5E5E5"
                                                                BorderBrush="Transparent"
                                                                BorderThickness="0,0,1,1"
                                                                Clip="{TemplateBinding TextBorderClip}"
                                                                IsHitTestVisible="False">
                                                            <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                              HorizontalAlignment="Left"
                                                                              VerticalAlignment="Center"
                                                                              Content="{TemplateBinding AddNewRowText}" />
                                                        </Border>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ResourceDictionary>
                            </syncfusion:SfDataGrid.Resources>


                            <syncfusion:SfDataGrid.Columns>
                              
                                <syncfusion:GridTemplateColumn HeaderText="Contacto"
                                                               FilterPopupStyle="{StaticResource ContactCodeStyle}">
                                    <syncfusion:GridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ListBox Name="ListBox" Width="200" Height="30"  
                                                      VerticalAlignment="Top" HorizontalAlignment="Left"  
                                                      Margin="10,10,0,0">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid Margin="0,2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="50*" />
                                                                <ColumnDefinition Width="50*" />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Grid.Column="0"  Text="{Binding Codigo}" />
                                                            <TextBox   Grid.Column="1"  Text="{Binding Completion}" />
                                                        </Grid>
                                                    </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                    </ListBox>
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.CellTemplate>
                                    <syncfusion:GridTemplateColumn.EditTemplate>
                                                <DataTemplate>
                                                    <ListBox Name="ListBox" Width="200" Height="30"  
                                                     VerticalAlignment="Top" HorizontalAlignment="Left"  
                                                     Margin="10,10,0,0">
                                                        <ListBox.ItemTemplate>
                                                            <DataTemplate>
                                                                <Grid Margin="0,2">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="50*" />
                                                                        <ColumnDefinition Width="50*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0"  Text="{Binding ContactCode}" />
                                                                    <TextBox   Grid.Column="1"  Text="{Binding CompletionCode}" />
                                                                </Grid>
                                                            </DataTemplate>
                                                        </ListBox.ItemTemplate>
                                                    </ListBox>
                                                </DataTemplate>
                                            </syncfusion:GridTemplateColumn.EditTemplate>
                                </syncfusion:GridTemplateColumn>
                                <syncfusion:GridTextColumn HeaderText="Name" MappingName="Name"/>
                                <syncfusion:GridDateTimeColumn HeaderText="Fecha" MappingName="Date"/>
                                <syncfusion:GridTemplateColumn HeaderText="Tipo"
                                                               FilterPopupStyle="{StaticResource ContactCodeStyle}">
                                            <syncfusion:GridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <ListBox Name="ListBox" Width="200" Height="30"  
                                                     VerticalAlignment="Top" HorizontalAlignment="Left"  
                                                     Margin="10,10,0,0">
                                                        <ListBox.ItemTemplate>
                                                            <DataTemplate>
                                                                <Grid Margin="0,2">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="50*" />
                                                                        <ColumnDefinition Width="50*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0"  Text="{Binding Codigo}" />
                                                                    <TextBox   Grid.Column="1"  Text="{Binding Completion}" />
                                                                </Grid>
                                                            </DataTemplate>
                                                        </ListBox.ItemTemplate>
                                                    </ListBox>
                                                </DataTemplate>
                                            </syncfusion:GridTemplateColumn.CellTemplate>
                                        </syncfusion:GridTemplateColumn>
                                        <syncfusion:GridDateTimeColumn HeaderText="Text" MappingName="Observation"/>
                            </syncfusion:SfDataGrid.Columns>
                            <!--
                            <i:Interaction.Behaviors>
                                <common:MaintenanceValidationBehavior />
                            </i:Interaction.Behaviors>
                            -->
                        </syncfusion:SfDataGrid>
                    </StackPanel>
                  
                </Grid>
                        <!--
                    <karveGrid:KarveGridView Grid.Row="0"  
                        x:Name="VisitSummary" PageSize="25" Grid.IsSharedSizeScope="True"
                                             MinHeight="400"  ReadOnly="True" ColumnWidth="100" SourceView="{Binding Path=DataObject.VisitDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    -->
               
                </ScrollViewer>
            </TabItem>
            <!--
            <TabItem Header="Acumulados">
                <ScrollViewer>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <WrapPanel Orientation="Vertical" HorizontalAlignment="Left" Grid.Column="0">
                    <local:CumulativeSummaryControl local:SummaryEx.CheckedArray="{Binding CheckedArray}" 
                                                    local:SummaryEx.DateArray ="{Binding DateArray}"
                                                    CustomMarkCommand="{Binding CommandMark}"
                                                    CustomUnmarkCommand="{Binding Unmark}">
                    </local:CumulativeSummaryControl>
                    </WrapPanel>
                    <karveGrid:KarveGridView x:Name="CumulativeSummary" Grid.Column="1" 
                                             PageSize="25" Grid.IsSharedSizeScope="True" 
                                              ReadOnly="True" ColumnWidth="100" SourceView="{Binding CumulativeSummary}"/>

                </Grid>
                </ScrollViewer>
            </TabItem>
            -->
        </TabControl>
        </StackPanel>    
        </Grid>
</UserControl>