<UserControl x:Class="MasterModule.Views.CommissionAgentInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mvvm1="http://prismlibrary.com/"
             mvvm1:ViewModelLocator.AutoWireViewModel="True"
             xmlns:local="clr-namespace:MasterModule.Views"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:karveControls="clr-namespace:KarveControls;assembly=KarveControls"
             xmlns:behaviour="clr-namespace:KarveControls.Behaviour;assembly=KarveControls"
             xmlns:gridbehavior="clr-namespace:KarveControls.Behaviour.Grid;assembly=KarveControls"
             xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:common="clr-namespace:MasterModule.Common"
             xmlns:properties="clr-namespace:KarveLocale.Properties;assembly=KarveLocale"
             xmlns:converter="clr-namespace:KarveCommon.Converter;assembly=KarveCommon"
             mc:Ignorable="d" 
             d:DesignHeight="1000" d:DesignWidth="1200"
            >
    <UserControl.Resources>

        <ResourceDictionary>
              
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MasterModule;component/Generic/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <converter:ByteToBooleanConverter x:Key="ByteToBoolean"></converter:ByteToBooleanConverter>
            
            <DataTemplate x:Key="CommissionAgentUpper">
                <Grid>

                    <GroupBox Header="{Binding lgeneral, Source={StaticResource ResourceLanguage}}">

                        <StackPanel Name="ContextLayout" Orientation="Horizontal">

                            <karveControls:DataField x:Name="Numero" TextContentWidth="100" IsReadOnly="True"
                                     DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     DataSourcePath="NUM_COMI"
                                
                                                     TextContent="{Binding DataObject.Value.NUM_COMI}"
                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                     LabelTextWidth="50" LabelText="{Binding lnumero, Source={StaticResource ResourceLanguage}}" LabelVisible="True">


                            </karveControls:DataField>
                            <karveControls:DataField x:Name="Persona" TextContentWidth="150" 
                                DataObject="{Binding DataObject, 
                                Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                TextContent="{Binding DataObject.Value.PERSONA, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                LabelTextWidth="50" 
                                DataSourcePath="PERSONA"
                                ItemChangedCommand="{Binding ItemChangedCommand}"
                                LabelText="{Binding lnombre, Source={StaticResource ResourceLanguage}}" 
                                LabelVisible="True">

                            </karveControls:DataField>
                            <karveControls:DataField x:Name="Nif" 
                                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                                     DataSourcePath="NIF"
                                       TextContent="{Binding DataObject.Value.NIF, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      LabelText="{Binding lnif, Source={StaticResource ResourceLanguage}}" TextContentWidth="100" 
                                      DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                      LabelTextWidth="50"  
                                      LabelVisible="True">

                            </karveControls:DataField>

                            <karveControls:DualFieldSearchBox x:Name="Tipo" 
                                              TextContentSecondWidth="200"
                                              TextContentFirstWidth="100"
                                              IsReadOnlySecond="True"
                                              LabelTextWidth="150" 
                                              LabelText="Tipo Comisionista" 
                                              AssistTableName="TIPOCOMI"
                                              MagnifierCommand="{Binding AssistCommand}"
                                              ItemChangedCommand="{Binding ItemChangedCommand}"
                                              LabelVisible="True"
                                              AssistProperties="Codigo,Nombre"
                                              DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SourceView="{Binding BrokerTypeDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              DataFieldFirst="TIPOCOMI"
                                              AssistDataFieldFirst="NUM_TICOMI"
                                              AssistDataFieldSecond="NOMBRE"
                                              ButtonImage="/MasterModule;component/Images/search.png">

                            </karveControls:DualFieldSearchBox>

                        </StackPanel>
                    </GroupBox>
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </UserControl.Resources>
    <ScrollViewer HorizontalScrollBarVisibility="Auto">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>

            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Loaded">
                    <mvvm1:InvokeCommandAction Command="{Binding ActiveSubsystemCommand }"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <ContentControl Grid.Row="0"  Margin="0,10,0,0"  Content="{Binding}" ContentTemplate="{StaticResource CommissionAgentUpper}">

            </ContentControl>
            
            <syncfusion:TabControlExt  Grid.Row="1" Name="MainTabControl"  TabScrollStyle="Extended" TabStripPlacement="Left" BorderThickness="0" 
                                       syncfusion:SkinStorage.VisualStyle="Metro"
                                       CloseButtonType="IndividualOnMouseOver">

                <syncfusion:TabItemExt Name="General"  Header="{Binding lgeneral, Source={StaticResource ResourceLanguage}}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch">
                    <ScrollViewer>
                        
                        <Grid ShowGridLines="False">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="215*"/>
                                    <RowDefinition Height="16*"/>
                                    <RowDefinition Height="198*"/>
                                    <RowDefinition Height="215*"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <GroupBox Grid.Column="1" Grid.RowSpan="4" Margin="0,0,0,0.333">
                                    <WrapPanel Orientation="Vertical">
                                        <ItemsControl x:Name="leftPart" HorizontalAlignment="Stretch" 
                                      VerticalAlignment="Stretch" 
                                      ItemsSource="{Binding LeftValueCollection}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <VirtualizingStackPanel Orientation="Vertical"
                                                            VirtualizingStackPanel.VirtualizationMode="Recycling" />

                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel>
                                                        <karveControls:DualFieldSearchBox
                                             LabelText ="{Binding LabelText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             LabelVisible="True"
                                             LabelTextWidth="100"
                                             DataFieldFirst="{Binding DataField}"
                                             AssistDataFieldFirst="{Binding AssistDataFieldFirst}" 
                                             AssistDataFieldSecond="{Binding AssistDataFieldSecond}"
                                             AssistTableName="{Binding AssistTableName}"
                                             AssistProperties="{Binding AssistProperties}"
                                             TextContentFirstWidth="100"
                                             TextContentSecondWidth="200"
                                             MagnifierCommand="{Binding AssistCommand, Mode=Default}"
                                             ItemChangedCommand="{Binding ChangedItem, Mode=Default}"
                                             DataSource="{Binding DataSource, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             ButtonImage="{Binding ButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                             SourceView="{Binding SourceView, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">

                                                        </karveControls:DualFieldSearchBox>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </WrapPanel>
                                </GroupBox>

                                <VirtualizingStackPanel VirtualizingStackPanel.VirtualizationMode="Recycling" x:Name="CommisionRightPart"  Grid.Column="0" Orientation="Vertical" Grid.RowSpan="4" Margin="0,0,0,0.333">

                                    <karveControls:DataField LabelText="{Binding lnombre, Source={StaticResource ResourceLanguage}}" LabelVisible="True" 
                                                       LabelTextWidth="100"
                                                             DataSourcePath="NOMBRE"
                                
                                                              DataObject="{Binding DataObject, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" 
                                                       TextContent="{Binding DataObject.Value.NOMBRE,
                                                                     Mode=TwoWay,
                                                                     ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"                                                    
                                                       ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay}"                                                                 
                                                       TextContentWidth="200">

                                    </karveControls:DataField>

                                    <karveControls:DataField LabelText="{Binding ldireccion, Source={StaticResource ResourceLanguage}}" LabelVisible="True" 
                                                     LabelTextWidth="100" 
                                                             DataSourcePath="DIRECCION"
                                                                 TextContent="{Binding DataObject.Value.DIRECCION,
                                                                     Mode=TwoWay,
                                                                     ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"                                                    
                                                                 ItemChangedCommand="{Binding ItemChangedCommand}"
                                                                DataObject="{Binding DataObject, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" 
                                                     TextContentWidth="200">
                                    </karveControls:DataField>

                                    <StackPanel Orientation="Horizontal">
                                        <karveControls:DualFieldSearchBox 
                                            x:Name="CitySearchBox"
                                            DataFieldFirst="CP"
                                            AssistTableName="POBLACIONES"
                                            AssistDataFieldFirst="CP"
                                            AssistDataFieldSecond="POBLA"
                                            AssistProperties="Code,Poblacion"
                                            LabelVisible="False"
                                            LabelText="{Binding lpoblacion, Source={StaticResource ResourceLanguage}}"
                                            Margin="0,5,0,0"
                                            LabelTextWidth="100"
                                            ItemChangedCommand="{Binding ItemChangedCommand}"
                                            MagnifierCommand="{Binding AssistCommand}"
                                            IsReadOnlySecond="True"
                                            TextContentFirstWidth="100"
                                            TextContentSecondWidth="200"
                                            ButtonImage="{x:Static common:MasterModuleConstants.ImagePath}"
                                            SourceView="{Binding CityDto, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                        </karveControls:DualFieldSearchBox>
                                    </StackPanel>
                                    <karveControls:DualFieldSearchBox LabelText="{Binding lprovincia, Source={StaticResource ResourceLanguage}}" 
                                                                  LabelTextWidth="100" 
                                                                  TextContentFirstWidth="50"
                                                                  TextContentSecondWidth="200"
                                                                  DataFieldFirst="PROVINCIA" 
                                                                  AssistDataFieldFirst="SIGLAS"
                                                                  AssistDataFieldSecond="PROV" 
                                                                  AssistTableName="PROVINCIA"
                                                                  AssistProperties="Code,Name"
                                                                  ItemChangedCommand="{Binding ItemChangedCommand}"
                                                                  MagnifierCommand="{Binding AssistCommand}"
                                                                  DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                  SourceView="{Binding Province, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                  ButtonImage="{Binding MagnifierButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">

                                    </karveControls:DualFieldSearchBox>
                                    <karveControls:DualFieldSearchBox LabelText="{Binding lpais, Source={StaticResource ResourceLanguage}}" 
                                                                LabelTextWidth="100" 
                                                                DataFieldFirst="NACIOPER" 
                                                                AssistDataFieldFirst="SIGLAS"
                                                                AssistDataFieldSecond="PAIS" 
                                                                AssistTableName="PAIS"
                                                                AssistProperties="Code,CountryName"
                                                                TextContentFirstWidth="50"
                                                                TextContentSecondWidth="200"
                                                                ItemChangedCommand="{Binding ItemChangedCommand}"
                                                                MagnifierCommand="{Binding AssistCommand}"
                                                                DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                SourceView="{Binding Country, UpdateSourceTrigger=PropertyChanged}"
                                                                ButtonImage="{Binding MagnifierButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                    </karveControls:DualFieldSearchBox>
                                    <StackPanel>
                                        <karveControls:DataField LabelText="{Binding ltelefono, Source={StaticResource ResourceLanguage}}" LabelVisible="True" 
                                                       LabelTextWidth="100" 
                                                       TextContentWidth="200"
                                                       DataSourcePath="TELEFONO"
                                
                                                       TextContent="{Binding DataObject.Value.TELEFONO,
                                                       Mode=TwoWay,
                                                       ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"                                                                                                        
                                                        DataObject="{Binding DataObject, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" 
                                                       ItemChangedCommand="{Binding ItemChangedCommand}">

                                        </karveControls:DataField>
                                        <karveControls:DataField LabelText="{Binding lfax, Source={StaticResource ResourceLanguage}}" 
                                                           LabelVisible="True" 
                                                                     TextContent="{Binding DataObject.Value.FAX,
                                                       Mode=TwoWay,
                                                       ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"                                                                                                        
                                                           LabelTextWidth="100" 
                                                           TextContentWidth="200"
                                                                 DataSourcePath="FAX"
                                
                                                           ItemChangedCommand="{Binding ItemChangedCommand}"
                                                           DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        </karveControls:DataField>

                                    </StackPanel>


                                    <karveControls:DataField DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                     LabelTextWidth="100" 
                                                     TextContentWidth="200" 
                                                     LabelText="{Binding lmovil, Source={StaticResource ResourceLanguage}}" 
                                                                 TextContent="{Binding DataObject.Value.MOVIL,
                                                       Mode=TwoWay,
                                                       ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
                                                            DataSourcePath="MOVIL"
                                
                                                     ItemChangedCommand="{Binding ItemChangedCommand}"
                                             
                                                     />

                                    <WrapPanel Orientation="Horizontal">
                                        <karveControls:DataDatePicker LabelText="{Binding StringConstants_FechaDeAlta, Source={StaticResource ResourceLanguage}}"
                                                              DataDatePickerHeight="30" 
                                                              LabelTextWidth="100" 
                                                              LabelVisible="True"
                                                              PickerContentWidth="150"
                                                                      
                                
                                                              DateContent="{Binding Path=DataObject.Value.ALTA_COMI, Mode=TwoWay,
                                                                            ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
                                                              >

                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataDatePickerChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </karveControls:DataDatePicker>
                                        <karveControls:DataDatePicker LabelText="{Binding StringConstants_FechaDeBaja, 
                                                Source={StaticResource ResourceLanguage}}"
                                                              LabelVisible="True"
                                                              LabelTextWidth="100" 
                                                              PickerContentWidth="100" 
                                                              DataDatePickerHeight="30"
                                                              DateContent="{Binding DataObject.Value.BAJA_COMI,
                                                              Mode=TwoWay,
                                                              ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}">
                                        </karveControls:DataDatePicker>
                                    </WrapPanel>
                                    <karveControls:DualFieldSearchBox 
                                LabelText="{Binding lidioma, Source={StaticResource ResourceLanguage}}" 
                                LabelTextWidth="80"
                                LabelVisible="True"
                                DataFieldFirst="IDIOMA" 
                                AssistDataFieldFirst="CODIGO"
                                AssistDataFieldSecond="NOMBRE" 
                                AssistTableName="IDIOMAS"
                                AssistProperties="Codigo,Nombre"
                                TextContentFirstWidth="50"
                                TextContentSecondWidth="150"
                                ItemChangedCommand="{Binding ItemChangedCommand}"
                                MagnifierCommand="{Binding AssistCommand }"
                                DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                SourceView="{Binding Language,UpdateSourceTrigger=PropertyChanged}"
                                ButtonImage="{Binding MagnifierButtonImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                    </karveControls:DualFieldSearchBox>

                                    <karveControls:DataField
                                LabelText="{Binding lniata, Source={StaticResource ResourceLanguage}}"
                                LabelTextWidth="100"
                                TextContentWidth="100"
                                         DataSourcePath="IATA"
                                             DataObject="{Binding DataObject, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" 
                                            ItemChangedCommand="{Binding ItemChangedCommand}"
                                            TextContent="{Binding Path=DataObject.Value.IATA,
                                            Mode=TwoWay,
                                            ValidatesOnDataErrors=True, 
                                            ValidatesOnNotifyDataErrors=True, 
                                            ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}">
                                    </karveControls:DataField>
                                    <GroupBox Header="{Binding Opciones, Source={StaticResource ResourceLanguage}}">
                                        <WrapPanel Orientation="Vertical">
                                            <karveControls:DataFieldCheckBox Content="{Binding livaenlistado, Source={StaticResource ResourceLanguage}}" 
                                                  karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                  karveControls:ControlExt.DataSourcePath="Value.IVASINO">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lretencionenlistado, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.RETENSINO">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lesnacional, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.NACIONAL">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lsiesclienteesagencia, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.CONCEPTOS_COND">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lesagenciadeviaje, Source={StaticResource ResourceLanguage}}"  
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.AGENCIA">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding ltraduceconceptosweb, Source={StaticResource ResourceLanguage}}"  
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.TRADUCE_WS">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding ltrackrentalbroker, Source={StaticResource ResourceLanguage}}"
                                                                 karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                 karveControls:ControlExt.DataSourcePath="Value.TRUCK_RENTAL_BROKER">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lcombustibleprepagoobligatorioplusde, Source={StaticResource ResourceLanguage}}"
                                                                 karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                 karveControls:ControlExt.DataSourcePath="Value.COMBUS_PREPAGO_COMI">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lnogenerarautofacturas, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.NO_GENERAR_AUTOFAC">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lcotizartodoslosextras, Source={StaticResource ResourceLanguage}}" 
                                                                         Visibility="Visible"
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.TODOS_EXTRAS">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" 
                                                                       TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>

                                            <karveControls:DataFieldCheckBox Content="{Binding lonewayautomatico, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.AUTO_ONEWAY">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lmostrarsóloincluidosalcotizartodoslosgrupos, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.COT_INCLUIDOS_SIN_GRUPO">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>

                                            <karveControls:DataFieldCheckBox Content="{Binding lnoenviarreservas, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.NO_MAIL_RES">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lautofacturasiniva, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.AUTOFAC_SIN_IVA">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                            <karveControls:DataFieldCheckBox Content="{Binding lcomisionsiniva, Source={StaticResource ResourceLanguage}}" 
                                                                         karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                         karveControls:ControlExt.DataSourcePath="Value.COMISION_SIN_IVA_COM">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldCheckBoxChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand, PresentationTraceSources.TraceLevel=High}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataFieldCheckBox>
                                        </WrapPanel>
                                    </GroupBox>

                                </VirtualizingStackPanel>
                            </Grid>
                        </Grid>
                    </ScrollViewer>

                </syncfusion:TabItemExt>

                <syncfusion:TabItemExt Name="BrokerTab" Header="{Binding Commisiones, Source={StaticResource ResourceLanguage}}">
                    <ScrollViewer>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="93*"/>
                                <RowDefinition Height="655*"/>

                            </Grid.RowDefinitions>
                            <Grid Margin="0,0,0,92" Grid.RowSpan="2">
                                <GroupBox Header="{Binding ltipocomision, Source={StaticResource ResourceLanguage}}">
                                    <WrapPanel Orientation="Vertical">
                                        <StackPanel Orientation="Horizontal">
                                            <karveControls:DataField
                                        LabelText="{Binding lporcentaje, Source={StaticResource ResourceLanguage}}"
                                        LabelVisible="True"
                                        TextContent="{Binding DataObject.Value.PORCEN,
                                                              Mode=TwoWay,
                                                               ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="200"
                                                 DataSourcePath="PORCEN"
                                        ItemChangedCommand="{Binding ItemChangedCommand}">
                                            </karveControls:DataField>
                                            <karveControls:DataField
                                        LabelText="{Binding lpercentlo, Source={StaticResource ResourceLanguage}}"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="50"
                                                    TextContent="{Binding DataObject.Value.PORCENLO,
                                                                     Mode=TwoWay,
                                                                     ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
                                       
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataField>
                                            <karveControls:DataField
                                        LabelText="{Binding lpercentcl, Source={StaticResource ResourceLanguage}}"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="50"
                                                 DataSourcePath="PORCENCL"
                                                    TextContent="{Binding DataObject.Value.PORCENCL,
                                                                     Mode=TwoWay,
                                                                     ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
                                                   
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                            </karveControls:DataField>
                                            <karveControls:DataField
                                        LabelText="{Binding lpercentsub, Source={StaticResource ResourceLanguage}}"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="100"
                                        TextContentWidth="50"
                                                 DataSourcePath="POR_SUBCONTRA"
                                       TextContent="{Binding DataObject.Value.POR_SUBCONTRA,
                                                             Mode=TwoWay,
                                                             ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
                                       
                                        ItemChangedCommand="{Binding ItemChangedCommand}">


                                            </karveControls:DataField>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <karveControls:DataField
                                        LabelText="{Binding limportecomision, Source={StaticResource ResourceLanguage}}"
                                        LabelVisible="True"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        LabelTextWidth="200"
                                        TextContentWidth="200"
                                                    TextContent="{Binding DataObject.Value.IMP_COMI,
                                                             Mode=TwoWay,
                                                             ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
          
                                         DataSourcePath="IMP_COMI"                                     
                                        ItemChangedCommand="{Binding ItemChangedCommand}">


                                            </karveControls:DataField>
                                            <karveControls:DataField
                                                    LabelTextWidth="200"
                                                    LabelText="{Binding lpercentsubcontractados, Source={StaticResource ResourceLanguage}}"
                                        DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    TextContent="{Binding DataObject.Value.IMP_COMI,
                                                             Mode=TwoWay,
                                                             ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"
          
                               
                                        ItemChangedCommand="{Binding ItemChangedCommand}">

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="DataFieldChanged">
                                                        <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>

                                            </karveControls:DataField>
                                        </StackPanel>
                                        <karveControls:DataField
                                    LabelText="{Binding lreferenciacliente, Source={StaticResource ResourceLanguage}}"
                                    LabelVisible="True"
                                    DataObject="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    LabelTextWidth="200" 
                                    TextContentWidth="200"
                                    DataSourcePath="REF_A_CLI"
                                    ItemChangedCommand="{Binding ItemChangedCommand}">

                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="DataFieldChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>

                                        </karveControls:DataField>
                                        <karveControls:DualFieldSearchBox 
                                    LabelText="{Binding lcliente, Source={StaticResource ResourceLanguage}}"
                                    LabelVisible="True"
                                    SourceView="{Binding ClientOne, UpdateSourceTrigger=PropertyChanged}" 
                                    DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    LabelTextWidth="200" 
                                    TextContentFirstWidth="200"
                                    TextContentSecondWidth="200"
                                  
                                    DataFieldFirst="CLIENTE"
                                    AssistTableName="CLIENTES1"
                                    AssistDataFieldFirst="NUMERO_CLI"
                                    AssistDataFieldSecond="NOMBRE"
                                    AssistProperties="Numero,Nombre"
                                    ButtonImage="{Binding MagnifierButtonImage}"
                                    MagnifierCommand="{Binding MagnifierCommand}"
                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="MagnifierPress">

                                                    <mvvm1:InvokeCommandAction Command="{Binding AssistCommand}" 
                                                                       TriggerParameterPath="AssistParameters" />

                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" 
                                                                       TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </karveControls:DualFieldSearchBox>

                                        <karveControls:DualFieldSearchBox 
                                    LabelText="{Binding lproductocomi, Source={StaticResource ResourceLanguage}}"
                                    LabelTextWidth="200"
                                    LabelVisible="True"
                                    SourceView="{Binding Products}" 
                                    DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    TextContentFirstWidth="70"
                                    TextContentSecondWidth="20"
                                    DataFieldFirst="PRODUCT_COMI"
                                    AssistTableName="PRODUCTS"
                                    AssistDataFieldFirst="CODIGO_PRD"
                                    AssistDataFieldSecond="NOMBRE_PRD"
                                    AssistProperties="Codigo,Nombre"
                                    ButtonImage="{Binding MagnifierButtonImage}"
                                    MagnifierCommand="{Binding MagnifierCommand}"
                                    ItemChangedCommand="{Binding ItemChangedCommand}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="MagnifierPress">

                                                    <mvvm1:InvokeCommandAction Command="{Binding AssistCommand}" 
                                                                       TriggerParameterPath="AssistParameters" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="DataSearchTextBoxChanged">
                                                    <mvvm1:InvokeCommandAction Command="{Binding ItemChangedCommand}" 
                                                                       TriggerParameterPath="ChangedValuesObjects"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </karveControls:DualFieldSearchBox>
                                    
                                    </WrapPanel>
                                </GroupBox>

                            </Grid>
                        </Grid>
                    </ScrollViewer>
                </syncfusion:TabItemExt>


                <syncfusion:TabItemExt x:Name="BranchTab" Header="{Binding ldelegaciones, Source={StaticResource ResourceLanguage}}">
                    <ScrollViewer>
                        <Grid>
                            <Grid.Resources>
                                <ResourceDictionary>
                                    <ObjectDataProvider x:Key="FilterMode"
                                                    MethodName="GetValues"
                                                    ObjectType="{x:Type system:Enum}">
                                        <ObjectDataProvider.MethodParameters>
                                            <x:Type TypeName="syncfusion:FilterMode" />
                                        </ObjectDataProvider.MethodParameters>
                                    </ObjectDataProvider>
                                  
                                    <Style x:Key="DelegationCodeStyle" TargetType="syncfusion:GridFilterControl">
                                        <Setter Property="FilterMode" Value="Both" />
                                    </Style>
                                </ResourceDictionary>
                            </Grid.Resources>
                            <StackPanel Orientation="Vertical">
                                <ContentControl VerticalAlignment="Top" Content="{Binding}" ContentTemplate="{StaticResource BranchGrid}"></ContentControl>
<!--
                                <syncfusion:SfDataGrid  x:Name="DelegationSummary"
                                                    ColumnSizer="AutoWithLastColumnFill"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="True"
                                                    AllowDeleting ="True"
                                                    AllowFiltering="True"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="False"
                                                    AllowGrouping="True"
                                                    NavigationMode="Cell"
                                                    AddNewRowPosition="Top"
                                                    karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    karveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.DelegationDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False">

                                    <i:Interaction.Behaviors>
                                        
                                        <gridbehavior:GridDefaultBehavior/>
                                    </i:Interaction.Behaviors>
                                    <syncfusion:SfDataGrid.Resources>
                                        <ResourceDictionary>
                                            <ResourceDictionary.MergedDictionaries>
                                                <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                                            </ResourceDictionary.MergedDictionaries>
                                            <Style TargetType="syncfusion:AddNewRowControl">
                                                <Setter Property="FontSize" Value="12" />
                                                <Setter Property="Foreground" Value="#FF808080" />
                                                <Setter Property="BorderBrush" Value="#FF7fd0de" />
                                                <Setter Property="BorderThickness" Value="0" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="syncfusion:AddNewRowControl">
                                                            <Grid>
                                                                <VisualStateManager.VisualStateGroups>
                                                                    <VisualStateGroup x:Name="AddNewRowStates">
                                                                        <VisualState x:Name="Normal" />
                                                                        <VisualState x:Name="Edit">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                                        <DiscreteObjectKeyFrame.Value>
                                                                                            <Visibility>Collapsed</Visibility>
                                                                                        </DiscreteObjectKeyFrame.Value>
                                                                                    </DiscreteObjectKeyFrame>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="HasError">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                                        <DiscreteObjectKeyFrame.Value>
                                                                                            <Visibility>Collapsed</Visibility>
                                                                                        </DiscreteObjectKeyFrame.Value>
                                                                                    </DiscreteObjectKeyFrame>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="NoError">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                                        <DiscreteObjectKeyFrame.Value>
                                                                                            <Visibility>Collapsed</Visibility>
                                                                                        </DiscreteObjectKeyFrame.Value>
                                                                                    </DiscreteObjectKeyFrame>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                    </VisualStateGroup>
                                                                    <VisualStateGroup x:Name="BorderStates">
                                                                        <VisualState x:Name="NormalRow" />
                                                                        <VisualState x:Name="FooterRow">
                                                                            <Storyboard BeginTime="0">
                                                                                <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="BorderThickness">
                                                                                    <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                                                </ThicknessAnimationUsingKeyFrames>
                                                                                <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="Margin">
                                                                                    <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                                                </ThicknessAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                    </VisualStateGroup>
                                                                </VisualStateManager.VisualStateGroups>
                                                                <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                    Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                    Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                                                <Border x:Name="PART_InValidBorder"
                                                                    Margin="0,0,1,1"
                                                                    Background="Transparent"
                                                                    BorderBrush="Red"
                                                                    BorderThickness="1"
                                                                    Visibility="Collapsed" />
                                                                <Border x:Name="PART_AddNewRowBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                    <ContentPresenter />
                                                                </Border>
                                                                <Border x:Name="PART_AddNewRowTextBorder"
                                                                    Background="#FFE5E5E5"
                                                                    BorderBrush="Transparent"
                                                                    BorderThickness="0,0,1,1"
                                                                    Clip="{TemplateBinding TextBorderClip}"
                                                                    IsHitTestVisible="False">
                                                                    <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                  HorizontalAlignment="Left"
                                                                                  VerticalAlignment="Center"
                                                                                  Content="{TemplateBinding AddNewRowText}" />
                                                                </Border>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ResourceDictionary>
                                    </syncfusion:SfDataGrid.Resources>


                                    <syncfusion:SfDataGrid.Columns>
                                        <syncfusion:GridTextColumn HeaderText="{Binding ldelegacion, Source={StaticResource ResourceLanguage}}" MappingName="Branch"
                                                                   FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>

                                        <syncfusion:GridTextColumn HeaderText="{Binding ldireccion, Source={StaticResource ResourceLanguage}}" MappingName="Address" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding ldireccion2, Source={StaticResource ResourceLanguage}}" MappingName="Address2" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lcp, Source={StaticResource ResourceLanguage}}" MappingName="Zip" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lpoblacion, Source={StaticResource ResourceLanguage}}" MappingName="City" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>

                                        <syncfusion:GridTemplateColumn HeaderText="{Binding lprovincia, Source={StaticResource ResourceLanguage}}"
                                                           FilterPopupStyle="{StaticResource DelegationCodeStyle}"
                                                                       AllowResizing="False"
                                                                       AllowEditing="False"
                                                                       MappingName="ProvinceSource">
                                            <syncfusion:GridTemplateColumn.CellTemplate>


                                                <DataTemplate>

                                                    <Grid>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="20*"></ColumnDefinition>
                                                            <ColumnDefinition Width="70*"></ColumnDefinition>
                                                            <ColumnDefinition Width="10*"></ColumnDefinition>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ProvinceSource.Code, Mode=TwoWay}"></TextBox>
                                                        <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ProvinceSource.Name, Mode=TwoWay}"></TextBlock>
                                                        <Button Grid.Column="2" Width="30" Command="{Binding Path=ProvinceSource.ShowCommand}" CommandParameter="{Binding}">
                                                            <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                        </Button>
                                                    </Grid>
                                                </DataTemplate>
                                            </syncfusion:GridTemplateColumn.CellTemplate>
                                            <syncfusion:GridTemplateColumn.EditTemplate>


                                                <DataTemplate>

                                                    <Grid>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="20*"></ColumnDefinition>
                                                            <ColumnDefinition Width="70*"></ColumnDefinition>
                                                            <ColumnDefinition Width="10*"></ColumnDefinition>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ProvinceSource.Code}"></TextBox>
                                                        <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ProvinceSource.Name, Mode=TwoWay}"></TextBlock>
                                                        <Button Grid.Column="2" Width="30" >
                                                            <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                            <i:Interaction.Behaviors>
                                                                <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.DelegationProvinceMagnifierCommand ,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                                            </i:Interaction.Behaviors>
                                                        </Button>
                                                    </Grid>
                                                </DataTemplate>
                                            </syncfusion:GridTemplateColumn.EditTemplate>

                                        </syncfusion:GridTemplateColumn>
                                        <syncfusion:GridTextColumn HeaderText="{Binding ltelefono, Source={StaticResource ResourceLanguage}}" MappingName="Phone" FilterPopupStyle="{StaticResource DelegationCodeStyle}" />
                                        <syncfusion:GridTextColumn HeaderText="{Binding ltelefono2, Source={StaticResource ResourceLanguage}}" MappingName="Phone2" FilterPopupStyle="{StaticResource DelegationCodeStyle}" />
                                        <syncfusion:GridTextColumn HeaderText="{Binding lemail, Source={StaticResource ResourceLanguage}}" MappingName="Email" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lfax, Source={StaticResource ResourceLanguage}}" MappingName="Fax" FilterPopupStyle="{StaticResource DelegationCodeStyle}"/>

                                    </syncfusion:SfDataGrid.Columns>

                                </syncfusion:SfDataGrid>
                                -->
                            </StackPanel>
                        </Grid>
                    </ScrollViewer>
                </syncfusion:TabItemExt>

                <syncfusion:TabItemExt  x:Name="ContactTab" Header="{Binding lcontactos, Source={StaticResource ResourceLanguage}}">
                   
                        <Grid>
                            <Grid.Resources>
                                <ResourceDictionary>
                                    <ObjectDataProvider x:Key="FilterMode"
                                                    MethodName="GetValues"
                                                    ObjectType="{x:Type system:Enum}">
                                        <ObjectDataProvider.MethodParameters>
                                            <x:Type TypeName="syncfusion:FilterMode" />
                                        </ObjectDataProvider.MethodParameters>
                                    </ObjectDataProvider>

                                    <Style x:Key="ContactCodeStyle" TargetType="{x:Type syncfusion:GridFilterControl}">
                                        <Setter Property="FilterMode" Value="Both" />
                                    </Style>
                                </ResourceDictionary>
                            </Grid.Resources>

                        <ContentControl VerticalAlignment="Top" Content="{Binding}" ContentTemplate="{StaticResource ContactGrid}"></ContentControl>
                        
                            <!--
                                <syncfusion:SfDataGrid  x:Name="ContactsSummary"
                                                    ColumnSizer="Star"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="True"
                                                    AllowDeleting ="True"
                                                    AllowFiltering="True"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="True"
                                                    AllowGrouping="True"
                                                    NavigationMode="Cell"
                                                    AddNewRowPosition="Top"
                                                    karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    karveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.ContactsDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False"
                            >
                            <i:Interaction.Behaviors>
                                <gridbehavior:GridDefaultBehavior/>
                            </i:Interaction.Behaviors>

                            <syncfusion:SfDataGrid.Resources>
                                        <ResourceDictionary>
                                            <ResourceDictionary.MergedDictionaries>
                                                <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                                            </ResourceDictionary.MergedDictionaries>
                                            <Style TargetType="syncfusion:AddNewRowControl">
                                                <Setter Property="FontSize" Value="12" />
                                                <Setter Property="Foreground" Value="#FF808080" />
                                                <Setter Property="BorderBrush" Value="#FF7fd0de" />
                                                <Setter Property="BorderThickness" Value="0" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="syncfusion:AddNewRowControl">
                                                            <Grid>
                                                                <VisualStateManager.VisualStateGroups>
                                                                    <VisualStateGroup x:Name="AddNewRowStates">
                                                                        <VisualState x:Name="Normal" />
                                                                        <VisualState x:Name="Edit">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                                        <DiscreteObjectKeyFrame.Value>
                                                                                            <Visibility>Collapsed</Visibility>
                                                                                        </DiscreteObjectKeyFrame.Value>
                                                                                    </DiscreteObjectKeyFrame>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="HasError">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                                        <DiscreteObjectKeyFrame.Value>
                                                                                            <Visibility>Collapsed</Visibility>
                                                                                        </DiscreteObjectKeyFrame.Value>
                                                                                    </DiscreteObjectKeyFrame>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="NoError">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                                        <DiscreteObjectKeyFrame.Value>
                                                                                            <Visibility>Collapsed</Visibility>
                                                                                        </DiscreteObjectKeyFrame.Value>
                                                                                    </DiscreteObjectKeyFrame>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                    </VisualStateGroup>
                                                                    <VisualStateGroup x:Name="BorderStates">
                                                                        <VisualState x:Name="NormalRow" />
                                                                        <VisualState x:Name="FooterRow">
                                                                            <Storyboard BeginTime="0">
                                                                                <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="BorderThickness">
                                                                                    <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                                                </ThicknessAnimationUsingKeyFrames>
                                                                                <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                              Duration="1"
                                                                                                              Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                              Storyboard.TargetProperty="Margin">
                                                                                    <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                                                </ThicknessAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                    </VisualStateGroup>
                                                                </VisualStateManager.VisualStateGroups>
                                                                <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                    Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                    Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                                                <Border x:Name="PART_InValidBorder"
                                                                    Margin="0,0,1,1"
                                                                    Background="Transparent"
                                                                    BorderBrush="Red"
                                                                    BorderThickness="1"
                                                                    Visibility="Collapsed" />
                                                                <Border x:Name="PART_AddNewRowBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                    <ContentPresenter />
                                                                </Border>
                                                                <Border x:Name="PART_AddNewRowTextBorder"
                                                                    Background="#FFE5E5E5"
                                                                    BorderBrush="Transparent"
                                                                    BorderThickness="0,0,1,1"
                                                                    Clip="{TemplateBinding TextBorderClip}"
                                                                    IsHitTestVisible="False">
                                                                    <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                  HorizontalAlignment="Left"
                                                                                  VerticalAlignment="Center"
                                                                                  Content="{TemplateBinding AddNewRowText}" />
                                                                </Border>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ResourceDictionary>
                                    </syncfusion:SfDataGrid.Resources>


                                    <syncfusion:SfDataGrid.Columns>
                                   
                                        <syncfusion:GridTextColumn HeaderText="{Binding lnombre, Source={StaticResource ResourceLanguage}}" MappingName="ContactName"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lnif, Source={StaticResource ResourceLanguage}}" MappingName="Nif"/>

                                        <syncfusion:GridTemplateColumn HeaderText="{Binding lcargo, Source={StaticResource ResourceLanguage}}"
                                                                        Width="200"
                                                                       AllowResizing="False"
                                                                       AllowEditing="False"
                                                                       MappingName="ResponsabilitySource">
                                            <syncfusion:GridTemplateColumn.CellTemplate>


                                                <DataTemplate>

                                                    <Grid>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="20*"></ColumnDefinition>
                                                            <ColumnDefinition Width="70*"></ColumnDefinition>
                                                            <ColumnDefinition Width="10*"></ColumnDefinition>
                                                        </Grid.ColumnDefinitions>


                                                        <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ResponsabilitySource.Code,Mode=TwoWay,PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}">

                                                        </TextBox>
                                                        <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ResponsabilitySource.Name,Mode=TwoWay,PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                                        <Button Grid.Column="2" Width="30" Command="{Binding Path=ResponsabilitySource.ShowCommand,PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}" CommandParameter="{Binding}">
                                                            <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                        </Button>
                                                    </Grid>
                                                </DataTemplate>
                                            </syncfusion:GridTemplateColumn.CellTemplate>

                                            <syncfusion:GridTemplateColumn.EditTemplate>


                                                <DataTemplate>

                                                    <Grid>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="20*"></ColumnDefinition>
                                                            <ColumnDefinition Width="70*"></ColumnDefinition>
                                                            <ColumnDefinition Width="10*"></ColumnDefinition>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ResponsabilitySource.Code, Mode=TwoWay, PresentationTraceSources.TraceLevel=High, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                                                        <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ResponsabilitySource.Name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                                        <Button Grid.Column="2" Width="30" >
                                                            <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                            <i:Interaction.Behaviors>
                                                                <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactChargeMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                                            </i:Interaction.Behaviors>
                                                        </Button>
                                                    </Grid>
                                                </DataTemplate>
                                            </syncfusion:GridTemplateColumn.EditTemplate>


                                        </syncfusion:GridTemplateColumn>
                                      
                                        <syncfusion:GridTextColumn HeaderText="{Binding ltelefono, Source={StaticResource ResourceLanguage}}" MappingName="Telefono"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lmovil, Source={StaticResource ResourceLanguage}}" MappingName="Movil"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lemail, Source={StaticResource ResourceLanguage}}" MappingName="Email"/>
                                        <syncfusion:GridTextColumn HeaderText="{Binding lfax, Source={StaticResource ResourceLanguage}}" MappingName="Fax"/>
                                    </syncfusion:SfDataGrid.Columns>

                                   
                                </syncfusion:SfDataGrid>
                           -->
                        </Grid>

                 
                </syncfusion:TabItemExt>

                <syncfusion:TabItemExt x:Name="VisitTab" 
                                       Header="{Binding Visitas, Source={StaticResource ResourceLanguage}}">
                    <Grid>
                        <Grid.Resources>
                            <ResourceDictionary>
                                <ObjectDataProvider x:Key="FilterMode"
                                                            MethodName="GetValues"
                                                            ObjectType="{x:Type system:Enum}">
                                    <ObjectDataProvider.MethodParameters>
                                        <x:Type TypeName="syncfusion:FilterMode" />
                                    </ObjectDataProvider.MethodParameters>
                                </ObjectDataProvider>

                                <Style x:Key="ContactCodeStyle" TargetType="syncfusion:GridFilterControl">
                                    <Setter Property="FilterMode" Value="Both" />
                                </Style>
                            </ResourceDictionary>
                        </Grid.Resources>
                        <ContentControl VerticalAlignment="Top" Content="{Binding}" ContentTemplate="{StaticResource VisitsGrid}"></ContentControl>
<!--
                        <syncfusion:SfDataGrid  x:Name="VisitsSummary"                           
                                                    ColumnSizer="AutoLastColumnFill"
                                                    AllowDraggingColumns="True"
                                                    AllowEditing="True"
                                                    AllowDeleting ="True"
                                                    AllowFiltering="True"
                                                    AllowResizingColumns="True"
                                                    AllowSorting="True"
                                                    AllowGrouping="True"
                                                    NavigationMode="Cell"
                                                    AddNewRowPosition="Top"
                                                    Width="{Binding Path=Width, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type syncfusion:TabItemExt}}}"
                                                    karveControls:ControlExt.DataSource="{Binding DataObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    karveControls:ControlExt.ItemChangedCommand="{Binding ItemChangedCommand, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ItemsSource="{Binding DataObject.VisitDto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    AutoGenerateColumns="False">

                            <syncfusion:SfDataGrid.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="/Syncfusion.SfGrid.WPF;component/Styles/Styles.xaml" />
                                    </ResourceDictionary.MergedDictionaries>
                                    <Style TargetType="syncfusion:AddNewRowControl">
                                        <Setter Property="FontSize" Value="12" />
                                        <Setter Property="Foreground" Value="#FF808080" />
                                        <Setter Property="BorderBrush" Value="#FF7fd0de" />
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="syncfusion:AddNewRowControl">
                                                    <Grid>
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="AddNewRowStates">
                                                                <VisualState x:Name="Normal" />
                                                                <VisualState x:Name="Edit">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="HasError">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="NoError">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_AddNewRowTextBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                            <VisualStateGroup x:Name="BorderStates">
                                                                <VisualState x:Name="NormalRow" />
                                                                <VisualState x:Name="FooterRow">
                                                                    <Storyboard BeginTime="0">
                                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                                      Duration="1"
                                                                                                                      Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                                      Storyboard.TargetProperty="BorderThickness">
                                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, 1, 0, 0" />
                                                                        </ThicknessAnimationUsingKeyFrames>
                                                                        <ThicknessAnimationUsingKeyFrames BeginTime="0"
                                                                                                                      Duration="1"
                                                                                                                      Storyboard.TargetName="PART_AddNewRowBorder"
                                                                                                                      Storyboard.TargetProperty="Margin">
                                                                            <EasingThicknessKeyFrame KeyTime="0" Value="0, -1, 0, 0" />
                                                                        </ThicknessAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                        <Border Background="{TemplateBinding RowSelectionBrush}"
                                                                            Clip="{TemplateBinding SelectionBorderClipRect}"
                                                                            Visibility="{TemplateBinding SelectionBorderVisiblity}" />
                                                        <Border x:Name="PART_InValidBorder"
                                                                            Margin="0,0,1,1"
                                                                            Background="Transparent"
                                                                            BorderBrush="Red"
                                                                            BorderThickness="1"
                                                                            Visibility="Collapsed" />
                                                        <Border x:Name="PART_AddNewRowBorder"
                                                                            Background="{TemplateBinding Background}"
                                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                                            BorderThickness="{TemplateBinding BorderThickness}">
                                                            <ContentPresenter />
                                                        </Border>
                                                        <Border x:Name="PART_AddNewRowTextBorder"
                                                                            Background="#FFE5E5E5"
                                                                            BorderBrush="Transparent"
                                                                            BorderThickness="0,0,1,1"
                                                                            Clip="{TemplateBinding TextBorderClip}"
                                                                            IsHitTestVisible="False">
                                                            <ContentPresenter Margin="{TemplateBinding TextMargin}"
                                                                                          HorizontalAlignment="Left"
                                                                                          VerticalAlignment="Center"
                                                                                          Content="{TemplateBinding AddNewRowText}" />
                                                        </Border>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ResourceDictionary>
                            </syncfusion:SfDataGrid.Resources>
                            <i:Interaction.Behaviors>
                                
                                <gridbehavior:GridDefaultBehavior/>
                            </i:Interaction.Behaviors>
                            <syncfusion:SfDataGrid.Columns>
                                <syncfusion:GridTemplateColumn HeaderText="{Binding lcontacto, Source={StaticResource ResourceLanguage}}"
                                                          
                                                                       AllowResizing="False"
                                                                       AllowEditing="False"
                                                                       MappingName="ContactsSource">
                                    <syncfusion:GridTemplateColumn.CellTemplate>


                                        <DataTemplate>

                                            <Grid>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                                </Grid.ColumnDefinitions>


                                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ContactsSource.ContactId,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                                </TextBox>
                                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ContactsSource.ContactName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                                <Button Grid.Column="2" Width="30" Command="{Binding Path=ContactsSource.ShowCommand,UpdateSourceTrigger=PropertyChanged}" CommandParameter="{Binding}">
                                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                    <i:Interaction.Behaviors>
                                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" 
                                                                                                  Param="{Binding}" />
                                                    </i:Interaction.Behaviors>


                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.CellTemplate>

                                    <syncfusion:GridTemplateColumn.EditTemplate>


                                        <DataTemplate>

                                            <Grid>
                                                <Grid.Resources>

                                                </Grid.Resources>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                                </Grid.ColumnDefinitions>
                                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=ContactsSource.Code, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=ContactsSource.Name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                                <Button Grid.Column="2" Width="30" >
                                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                    <i:Interaction.Behaviors>
                                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ContactMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                                    </i:Interaction.Behaviors>
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.EditTemplate>


                                </syncfusion:GridTemplateColumn>

                                <syncfusion:GridCheckBoxColumn HeaderText="P" MappingName="IsOrder" />
                                <syncfusion:GridDateTimeColumn  
                                            AllowNullValue="True"
                                            HeaderText="{Binding lfecha, Source={StaticResource ResourceLanguage}}"
                                            MappingName="Date"
                                            NullValue="01/01/2017" />

                                <syncfusion:GridTemplateColumn HeaderText="{Binding lvendidor, Source={StaticResource ResourceLanguage}}"
                                                           AllowEditing="False"
                                                           MappingName="SellerSource">
                                    <syncfusion:GridTemplateColumn.CellTemplate>


                                        <DataTemplate>

                                            <Grid>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                                    <ColumnDefinition Width="70*"></ColumnDefinition>
                                                    <ColumnDefinition Width="10*"></ColumnDefinition>
                                                </Grid.ColumnDefinitions>


                                                <TextBox Grid.Column="0" Width="50" Text="{Binding Path=SellerSource.Code,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                                </TextBox>
                                                <TextBlock Grid.Column="1"  Width="150" Text="{Binding Path=SellerSource.Name,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                                <Button Grid.Column="2" Width="30" Command="{Binding Path=SellerSource.ShowCommand,UpdateSourceTrigger=PropertyChanged}" CommandParameter="{Binding}">
                                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                    <i:Interaction.Behaviors>
                                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.ResellerMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" 
                                                                                                  Param="{Binding}" />
                                                    </i:Interaction.Behaviors>


                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.CellTemplate>

                                    <syncfusion:GridTemplateColumn.EditTemplate>


                                        <DataTemplate>

                                            <Grid>
                                                <Grid.Resources>

                                                </Grid.Resources>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="20*"></ColumnDefinition>
                                                    <ColumnDefinition Width="50*"></ColumnDefinition>
                                                    <ColumnDefinition Width="30*"></ColumnDefinition>
                                                </Grid.ColumnDefinitions>
                                                <TextBox Grid.Column="0"  Text="{Binding Path=SellerSource.Code, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                                                <TextBlock Grid.Column="1"  Text="{Binding Path=SellerSource.Name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                                <Button Grid.Column="2">
                                                    <Image Source="/KarveCar;component/Images/search.png" Height="25"></Image>
                                                    <i:Interaction.Behaviors>
                                                        <behaviour:GridEditButtonBehavior Command="{Binding Path=DataContext.SellerMagnifierCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Param="{Binding}" />
                                                    </i:Interaction.Behaviors>
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.EditTemplate>


                                </syncfusion:GridTemplateColumn>
                                <syncfusion:GridTemplateColumn HeaderText="{Binding lrbtnTiposVisita, Source={StaticResource ResourceLanguage}}" MappingName="VisitType">
                                    <syncfusion:GridTemplateColumn.CellTemplate>
                                        <DataTemplate>

                                            <syncfusion:ComboBoxAdv DisplayMemberPath="VisitType" ItemsSource="{Binding}">
                                                <i:Interaction.Behaviors>
                                                    <behaviour:ComboAdvChangeBehavior DataObject="{Binding}"  
                                                                                              Command="{Binding Path=DataContext.ItemChangedCommand,
                                                                                                        RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}"/>
                                                </i:Interaction.Behaviors>

                                            </syncfusion:ComboBoxAdv>

                                        </DataTemplate>
                                    </syncfusion:GridTemplateColumn.CellTemplate>
                                </syncfusion:GridTemplateColumn>
                                <syncfusion:GridTextColumn HeaderText="{Binding ltext, Source={StaticResource ResourceLanguage}}" MappingName="Text">
                                    
                                </syncfusion:GridTextColumn>

                            </syncfusion:SfDataGrid.Columns>
                        </syncfusion:SfDataGrid>
  -->
                        </Grid>
                </syncfusion:TabItemExt>
            </syncfusion:TabControlExt>
        </Grid>
    </ScrollViewer>
</UserControl>