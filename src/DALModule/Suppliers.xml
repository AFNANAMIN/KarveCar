<?xml version="1.0" encoding="UTF-8" ?>
<sqlMap namespace="Suppliers" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
  <resultMaps>
    <resultMap id="SupplierSummaryResultMap"  class="SupplierSummaryDataObject" >
      <result property="Numero"     		column="NUM_PROVEE"/>
      <result property="Nombre"    		column="NOMBRE"/>
      <result property="Nif"    			column="NIF"/>
    </resultMap>
    <resultMap id="SupplierInfoResultMap" class="SupplierInfoDataObject" >
	<result property="Direction"       		column="DIRECCION"/>
	<result property="CountryCode" 		column="NACIOPER"/>
	<result property="City" 			column="POBLACION"/>
	<result property="ProvinceCode" 		column="PROV"/>
	<result property="Phone" 			column="TELEFONO"/>
	<result property="Fax" 				column="FAX"/>
	<result property="WebSite" 			column="INTERNET"/>
	<result property="Email" 			column="EMAIL"/>
	<result property="Notes" 			column="NOTAS"/>
	<result property="DeliveringPeriod" 		column="PLAZOENT"/>
	<result property="DischargeDate" 		column="FALTA"/>
	<result property="LeavingDate" 			column="FBAJA"/>
	<result property="Observation" 			column="OBSERVA"/>
	<result property="MobilePhone" 			column="MOVIL"/>
	<result property="CommercialName" 		column="COMERCIAL"/>
	<result property="Zip" 				column="CP"/>
	<result property="Type" 				column="TIPO"/>
	<result property="LastChange" 			column="ULTMODI" />
	<result property="ChangedByUser" 		column="USUARIO" />
	</resultMap>
    <resultMap id="SupplierProvinceDataResultMap" class="SupplierProvinceDataObject">
	<result property="SupplierName"  column="NUM_PROVEE" />
	<result property="Province"  		column="PROV" />
	<result property="ProvinceCode"  		column="CP" />
   </resultMap>
    <resultMap id="ProvinceDataResultMap" class="SupplierProvinceDataObject">
	<result property="Province"  		column="PROV" />
	<result property="ProvinceCode"  		column="CP" />
   </resultMap>
 <resultMap id="SupplierCountryDataResultMap" class="SupplierCountryDataObject">
	<result property="Name"  		column="PAIS" />
	<result property="CountryCode" 		column="SIGLAS" />
   </resultMap>  
 <resultMap id="SupplierTypeResultMap" class="SupplierTypeDataObject">
	<result property="User"  				column="USUARIO" />
	<result property="EmergencyAccount" 	column="CTAGASTO" />
	<result property="Number" 			column="NUM_TIPROVE" />
	<result property="LastModification" 		column="ULTMODI" />
	<result property="Name" 				column="NOMBRE" />
   </resultMap> 
<resultMap id="ExtendedSummaryResultMap" class="ExtendedSummaryDataObject">
	<result property="Numero"  			column="NUM_PROVEE" />
	<result property="Nombre" 			column="NOMBRE" />
	<result property="Nif" 				column="NIF" />
	<result property="Commercial" 			column="COMERCIAL" />
	<result property="Phone" 				column="TELEFONO" />
	<result property="Direction" 			column="DIRECCION" />
	<result property="Zip" 				column="CP" />
	<result property="City" 			column="POBLACION" />
	<result property="Type" 				column="TIPO" />
	<result property="Email" 				column="EMAIL" />
	<result property="Aeat" 				column="F_AEAT" />
	<result property="PaymentType" 		column="FORMA" />
	<result property="Account" 		        column="CONTABLE" />
	<result property="ExpenseAccount" 	        column="CUGASTO" />
	<result property="SupplierPeriod1" 	        column="PLAZO" />
	<result property="SupplierPeriod2" 	        column="PLAZO2" />
	<result property="SupplierPeriod3" 	        column="PLAZO3" />
	<result property="SupplierDay1" 	        column="DIA" />
	<result property="SupplierDay2" 	        column="DIA2" />
	<result property="SupplierDay3" 	        column="DIA3" />
	<result property="VacationMonth1" 	        column="MESVACA" />
	<result property="VacationMonth2" 	        column="MESVACA2" />
	<result property="LastChange" 			column="ULTMODI" />
	<result property="ChangedByUser" 		column="USUARIO" />
   </resultMap>      
</resultMaps>
    <statements>
    
    <select id="GetSupplierTypes"  resultMap="SupplierTypeResultMap">
	SELECT  USUARIO,
	CTAGASTO,
	NUM_TIPROVE,
	ULTMODI,
	NOMBRE FROM TIPROVE
    </select>
    <select id="GetSupplierTypeById"  parameterClass="String" resultMap="SupplierTypeResultMap">
	SELECT  
	USUARIO,
	CTAGASTO,
	NUM_TIPROVE,
	ULTMODI,
	NOMBRE
	FROM TIPOPROVE
	WHERE NUM_TIPROVE =  #value#
    </select> 
    <select id="GetAllSuppliersSummary"  resultMap="SupplierSummaryResultMap">
	SELECT NUM_PROVEE, 
		    NOMBRE, 
		    NIF 
		    FROM PROVEE1
    </select>
    <select id="GetFullSuppliersSummary"  resultMap="ExtendedSummaryResultMap">
    SELECT PROVEE1.NUM_PROVEE, PROVEE1.NOMBRE, NIF, COMERCIAL, TELEFONO, DIRECCION, CP, POBLACION, TIPO,EMAIL, F_AEAT, FORMA, PROVEE2.CONTABLE, 
   CUGASTO, PROVEE2.PLAZO, PROVEE2.PLAZO2, PROVEE2.PLAZO3, PROVEE2.DIA, PROVEE2.DIA2, PROVEE2.DIA3, PROVEE1.MESVACA, PROVEE1.MESVACA2, PROVEE1.ULTMODI, PROVEE1.USUARIO   
   FROM PROVEE1, PROVEE2 WHERE PROVEE1.NUM_PROVEE = PROVEE2.NUM_PROVEE;
</select>
    <select id="GetSupplierInfos" parameterClass="String" resultMap="SupplierInfoResultMap">
      SELECT
	DIRECCION, 
	NACIOPER, 
	POBLACION,
	PROV,
	TELEFONO,
	FAX,
	EMAIL,
	INTERNET,
	NOTAS,
	PERSONA,
	PLAZOENT, 
	FALTA, 
	FBAJA,
	OBSERVA,
	MOVIL,
	PROVEE2.COMERCIAL,
	CP,
	TIPO,
	ULTMODI,
	USUARIO
	FROM PROVEE1, PROVEE2
      where (PROVEE1.NUM_PROVEE = #value#) and (PROVEE2.NUM_PROVEE = PROVEE1.NUM_PROVEE)
    </select>
    <select id="GetProvinceForEachSupplier" resultMap="SupplierProvinceDataResultMap">
    SELECT NUM_PROVEE, PROVINCIA.PROV, PROVINCIA.CP
	FROM PROVEE1, PROVINCIA
	WHERE PROVEE1.PROV = PROVINCIA.CP
    </select>
<select id="GetCountryForSingleSupplier" parameterClass="String" resultMap="SupplierCountryDataResultMap">
    SELECT SIGLAS, PAIS
	FROM PAIS
	WHERE SIGLAS = #value#
    </select>
<select id="GetAllCountries"  resultMap="SupplierCountryDataResultMap">
	SELECT SIGLAS, PAIS
	FROM PAIS
    </select>
    <select id="GetAllProvinces" resultMap="ProvinceDataResultMap">
	SELECT  PROVINCIA.PROV, PROVINCIA.CP
	FROM  PROVINCIA
    </select>
</statements>
</sqlMap>
